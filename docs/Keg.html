<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Keg
  
    &mdash; Homebrew Ruby API
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Keg";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (K)</a> &raquo;
    
    
    <span class="title">Keg</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Keg
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Keg</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd><span class='object_link'><a href="Cachable.html" title="Cachable (module)">Cachable</a></span>, Forwardable</dd>
  </dl>
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>extend/os/mac/keg.rb<span class="defines">,<br />
  extend/os/linux/keg.rb,<br /> extend/os/mac/keg_relocate.rb,<br /> extend/os/linux/keg_relocate.rb,<br /> keg.rb,<br /> os/mac/keg.rb,<br /> keg_relocate.rb</span>
</dd>
  </dl>
  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Keg/AlreadyLinkedError.html" title="Keg::AlreadyLinkedError (class)">AlreadyLinkedError</a></span>, <span class='object_link'><a href="Keg/ConflictError.html" title="Keg::ConflictError (class)">ConflictError</a></span>, <span class='object_link'><a href="Keg/DirectoryNotWritableError.html" title="Keg::DirectoryNotWritableError (class)">DirectoryNotWritableError</a></span>, <span class='object_link'><a href="Keg/LinkError.html" title="Keg::LinkError (class)">LinkError</a></span>, <span class='object_link'><a href="Keg/Relocation.html" title="Keg::Relocation (class)">Relocation</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="GENERIC_KEG_LINK_DIRECTORIES-constant" class="">GENERIC_KEG_LINK_DIRECTORIES =
          
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='id identifier rubyid_remove_const'>remove_const</span> <span class='symbol'>:KEG_LINK_DIRECTORIES</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="KEG_LINK_DIRECTORIES-constant" class="">KEG_LINK_DIRECTORIES =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='words_sep'>
  </span><span class='tstring_content'>bin</span><span class='words_sep'> </span><span class='tstring_content'>etc</span><span class='words_sep'> </span><span class='tstring_content'>include</span><span class='words_sep'> </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>sbin</span><span class='words_sep'> </span><span class='tstring_content'>share</span><span class='words_sep'> </span><span class='tstring_content'>var</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="GENERIC_MUST_EXIST_SUBDIRECTORIES-constant" class="">GENERIC_MUST_EXIST_SUBDIRECTORIES =
          
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='id identifier rubyid_remove_const'>remove_const</span> <span class='symbol'>:MUST_EXIST_SUBDIRECTORIES</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="MUST_EXIST_SUBDIRECTORIES-constant" class="">MUST_EXIST_SUBDIRECTORIES =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span>
  <span class='const'><span class='object_link'><a href="#KEG_LINK_DIRECTORIES-constant" title="Keg::KEG_LINK_DIRECTORIES (constant)">KEG_LINK_DIRECTORIES</a></span></span> <span class='op'>-</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>var</span><span class='tstring_end'>]</span></span> <span class='op'>+</span> <span class='qwords_beg'>%w[</span><span class='words_sep'>
    </span><span class='tstring_content'>opt</span><span class='words_sep'>
    </span><span class='tstring_content'>var/homebrew/linked</span><span class='words_sep'>
  </span><span class='tstring_end'>]</span></span>
<span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='op'>/</span><span class='id identifier rubyid_dir'>dir</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="GENERIC_MUST_EXIST_DIRECTORIES-constant" class="">GENERIC_MUST_EXIST_DIRECTORIES =
          
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='id identifier rubyid_remove_const'>remove_const</span> <span class='symbol'>:MUST_EXIST_DIRECTORIES</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="MUST_EXIST_DIRECTORIES-constant" class="">MUST_EXIST_DIRECTORIES =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>
<p>Keep relatively in sync with
<a href="https://github.com/Homebrew/install/blob/HEAD/install.sh" target="_parent" title="https://github.com/Homebrew/install/blob/HEAD/install.sh">https://github.com/Homebrew/install/blob/HEAD/install.sh</a></p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#MUST_EXIST_SUBDIRECTORIES-constant" title="Keg::MUST_EXIST_SUBDIRECTORIES (constant)">MUST_EXIST_SUBDIRECTORIES</a></span></span> <span class='op'>+</span> <span class='lbracket'>[</span>
  <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_CELLAR-constant" title="HOMEBREW_CELLAR (constant)">HOMEBREW_CELLAR</a></span></span><span class='comma'>,</span>
<span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="GENERIC_MUST_BE_WRITABLE_DIRECTORIES-constant" class="">GENERIC_MUST_BE_WRITABLE_DIRECTORIES =
          
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='id identifier rubyid_remove_const'>remove_const</span> <span class='symbol'>:MUST_BE_WRITABLE_DIRECTORIES</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="MUST_BE_WRITABLE_DIRECTORIES-constant" class="">MUST_BE_WRITABLE_DIRECTORIES =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span>
  <span class='qwords_beg'>%w[</span><span class='words_sep'>
    </span><span class='tstring_content'>etc/bash_completion.d</span><span class='words_sep'> </span><span class='tstring_content'>lib/pkgconfig</span><span class='words_sep'>
    </span><span class='tstring_content'>share/aclocal</span><span class='words_sep'> </span><span class='tstring_content'>share/doc</span><span class='words_sep'> </span><span class='tstring_content'>share/info</span><span class='words_sep'> </span><span class='tstring_content'>share/locale</span><span class='words_sep'> </span><span class='tstring_content'>share/man</span><span class='words_sep'>
    </span><span class='tstring_content'>share/man/man1</span><span class='words_sep'> </span><span class='tstring_content'>share/man/man2</span><span class='words_sep'> </span><span class='tstring_content'>share/man/man3</span><span class='words_sep'> </span><span class='tstring_content'>share/man/man4</span><span class='words_sep'>
    </span><span class='tstring_content'>share/man/man5</span><span class='words_sep'> </span><span class='tstring_content'>share/man/man6</span><span class='words_sep'> </span><span class='tstring_content'>share/man/man7</span><span class='words_sep'> </span><span class='tstring_content'>share/man/man8</span><span class='words_sep'>
    </span><span class='tstring_content'>share/zsh</span><span class='words_sep'> </span><span class='tstring_content'>share/zsh/site-functions</span><span class='words_sep'>
    </span><span class='tstring_content'>var/log</span><span class='words_sep'>
  </span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='op'>/</span><span class='id identifier rubyid_dir'>dir</span> <span class='rbrace'>}</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="#MUST_EXIST_SUBDIRECTORIES-constant" title="Keg::MUST_EXIST_SUBDIRECTORIES (constant)">MUST_EXIST_SUBDIRECTORIES</a></span></span> <span class='op'>+</span> <span class='lbracket'>[</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_CACHE-constant" title="HOMEBREW_CACHE (constant)">HOMEBREW_CACHE</a></span></span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_CELLAR-constant" title="HOMEBREW_CELLAR (constant)">HOMEBREW_CELLAR</a></span></span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_LOCKS-constant" title="HOMEBREW_LOCKS (constant)">HOMEBREW_LOCKS</a></span></span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_LOGS-constant" title="HOMEBREW_LOGS (constant)">HOMEBREW_LOGS</a></span></span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_REPOSITORY-constant" title="HOMEBREW_REPOSITORY (constant)">HOMEBREW_REPOSITORY</a></span></span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="Language.html" title="Language (module)">Language</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Language/Python.html" title="Language::Python (module)">Python</a></span></span><span class='period'>.</span><span class='id identifier rubyid_homebrew_site_packages'><span class='object_link'><a href="Language/Python.html#homebrew_site_packages-class_method" title="Language::Python.homebrew_site_packages (method)">homebrew_site_packages</a></span></span><span class='comma'>,</span>
  <span class='rbracket'>]</span>
<span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="VARIABLE_REFERENCE_RX-constant" class="">VARIABLE_REFERENCE_RX =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^@(loader_|executable_|r)path</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="FRAMEWORK_RX-constant" class="">FRAMEWORK_RX =
          <div class="docstring">
  <div class="discussion">
    <p>Matches framework references like <code>XXX.framework/Versions/YYY/XXX</code> and
<code>XXX.framework/XXX</code>, both with or without a slash-delimited prefix.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:^|/)(([^/]+)\.framework/(?:Versions/[^/]+/)?\2)$</span><span class='regexp_end'>}</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="LOCALEDIR_RX-constant" class="">LOCALEDIR_RX =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>
<p>Locale-specific directories have the form <code>language[_territory][.codeset][@modifier]</code></p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(locale|man)/([a-z]{2}|C|POSIX)(_[A-Z]{2})?(\.[a-zA-Z\-0-9]+(@.+)?)?</span><span class='regexp_end'>}</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="INFOFILE_RX-constant" class="">INFOFILE_RX =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>info/([^.].*?\.info|dir)$</span><span class='regexp_end'>}</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="SHARE_PATHS-constant" class="">SHARE_PATHS =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>
<p>These paths relative to the kegâ€™s share directory should always be real
directories in the prefix, never symlinks.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='words_sep'>
  </span><span class='tstring_content'>aclocal</span><span class='words_sep'> </span><span class='tstring_content'>doc</span><span class='words_sep'> </span><span class='tstring_content'>info</span><span class='words_sep'> </span><span class='tstring_content'>java</span><span class='words_sep'> </span><span class='tstring_content'>locale</span><span class='words_sep'> </span><span class='tstring_content'>man</span><span class='words_sep'>
  </span><span class='tstring_content'>man/man1</span><span class='words_sep'> </span><span class='tstring_content'>man/man2</span><span class='words_sep'> </span><span class='tstring_content'>man/man3</span><span class='words_sep'> </span><span class='tstring_content'>man/man4</span><span class='words_sep'>
  </span><span class='tstring_content'>man/man5</span><span class='words_sep'> </span><span class='tstring_content'>man/man6</span><span class='words_sep'> </span><span class='tstring_content'>man/man7</span><span class='words_sep'> </span><span class='tstring_content'>man/man8</span><span class='words_sep'>
  </span><span class='tstring_content'>man/cat1</span><span class='words_sep'> </span><span class='tstring_content'>man/cat2</span><span class='words_sep'> </span><span class='tstring_content'>man/cat3</span><span class='words_sep'> </span><span class='tstring_content'>man/cat4</span><span class='words_sep'>
  </span><span class='tstring_content'>man/cat5</span><span class='words_sep'> </span><span class='tstring_content'>man/cat6</span><span class='words_sep'> </span><span class='tstring_content'>man/cat7</span><span class='words_sep'> </span><span class='tstring_content'>man/cat8</span><span class='words_sep'>
  </span><span class='tstring_content'>applications</span><span class='words_sep'> </span><span class='tstring_content'>gnome</span><span class='words_sep'> </span><span class='tstring_content'>gnome/help</span><span class='words_sep'> </span><span class='tstring_content'>icons</span><span class='words_sep'>
  </span><span class='tstring_content'>mime-info</span><span class='words_sep'> </span><span class='tstring_content'>pixmaps</span><span class='words_sep'> </span><span class='tstring_content'>sounds</span><span class='words_sep'> </span><span class='tstring_content'>postgresql</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="ELISP_EXTENSIONS-constant" class="">ELISP_EXTENSIONS =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='tstring_content'>.el</span><span class='words_sep'> </span><span class='tstring_content'>.elc</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PYC_EXTENSIONS-constant" class="">PYC_EXTENSIONS =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='tstring_content'>.pyc</span><span class='words_sep'> </span><span class='tstring_content'>.pyo</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="LIBTOOL_EXTENSIONS-constant" class="">LIBTOOL_EXTENSIONS =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  This constant may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this constant if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='tstring_content'>.la</span><span class='words_sep'> </span><span class='tstring_content'>.lai</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PREFIX_PLACEHOLDER-constant" class="">PREFIX_PLACEHOLDER =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@HOMEBREW_PREFIX@@</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="CELLAR_PLACEHOLDER-constant" class="">CELLAR_PLACEHOLDER =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@HOMEBREW_CELLAR@@</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="REPOSITORY_PLACEHOLDER-constant" class="">REPOSITORY_PLACEHOLDER =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@HOMEBREW_REPOSITORY@@</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="LIBRARY_PLACEHOLDER-constant" class="">LIBRARY_PLACEHOLDER =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@HOMEBREW_LIBRARY@@</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="PERL_PLACEHOLDER-constant" class="">PERL_PLACEHOLDER =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@HOMEBREW_PERL@@</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="JAVA_PLACEHOLDER-constant" class="">JAVA_PLACEHOLDER =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@HOMEBREW_JAVA@@</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="NULL_BYTE-constant" class="">NULL_BYTE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x00</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="NULL_BYTE_STRING-constant" class="">NULL_BYTE_STRING =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\x00</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="JAVA_REGEX-constant" class="">JAVA_REGEX =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>%r{</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/opt/openjdk(@\d+(\.\d+)*)?/libexec(/openjdk\.jdk/Contents/Home)?</span><span class='regexp_end'>}</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      
<li class="public ">
  <span class="summary_signature">
    
      <a href="#linked_keg_record-instance_method" title="#linked_keg_record (instance method)">#<strong>linked_keg_record</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

    
      
<li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

    
      
<li class="public ">
  <span class="summary_signature">
    
      <a href="#opt_record-instance_method" title="#opt_record (instance method)">#<strong>opt_record</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#all-class_method" title="all (class method)">.<strong>all</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#file_linked_libraries-class_method" title="file_linked_libraries (class method)">.<strong>file_linked_libraries</strong>(_file, _string)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#for-class_method" title="for (class method)">.<strong>for</strong>(path)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#text_matches_in_file-class_method" title="text_matches_in_file (class method)">.<strong>text_matches_in_file</strong>(file, string, ignores, linked_libraries, formula_and_runtime_deps_names)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#==-instance_method" title="#== (instance method)">#<strong>==</strong>(other)  &#x21d2; Object </a>
    
    
      (also: #eql?)
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#aliases-instance_method" title="#aliases (instance method)">#<strong>aliases</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#apps-instance_method" title="#apps (instance method)">#<strong>apps</strong>  &#x21d2; Array&lt;Pathname&gt; </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#binary_executable_or_library_files-instance_method" title="#binary_executable_or_library_files (instance method)">#<strong>binary_executable_or_library_files</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#binary_file%3F-instance_method" title="#binary_file? (instance method)">#<strong>binary_file?</strong>(file)  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#change_dylib_id-instance_method" title="#change_dylib_id (instance method)">#<strong>change_dylib_id</strong>(id, file)  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#change_install_name-instance_method" title="#change_install_name (instance method)">#<strong>change_install_name</strong>(old, new, file)  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#change_rpath-instance_method" title="#change_rpath (instance method)">#<strong>change_rpath</strong>(old, new, file)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#codesign_patched_binary-instance_method" title="#codesign_patched_binary (instance method)">#<strong>codesign_patched_binary</strong>(file)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#completion_installed%3F-instance_method" title="#completion_installed? (instance method)">#<strong>completion_installed?</strong>(shell)  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#consistent_reproducible_symlink_permissions!-instance_method" title="#consistent_reproducible_symlink_permissions! (instance method)">#<strong>consistent_reproducible_symlink_permissions!</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'><p>Needed to make symlink permissions consistent on macOS and Linux for reproducible bottles.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_pyc_files!-instance_method" title="#delete_pyc_files! (instance method)">#<strong>delete_pyc_files!</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_rpath-instance_method" title="#delete_rpath (instance method)">#<strong>delete_rpath</strong>(rpath, file)  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#detect_cxx_stdlibs-instance_method" title="#detect_cxx_stdlibs (instance method)">#<strong>detect_cxx_stdlibs</strong>(_options = {})  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#dylib_id_for-instance_method" title="#dylib_id_for (instance method)">#<strong>dylib_id_for</strong>(file)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#each_linkage_for-instance_method" title="#each_linkage_for (instance method)">#<strong>each_linkage_for</strong>(file, linkage_type, resolve_variable_references: false, &amp;block)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#each_unique_file_matching-instance_method" title="#each_unique_file_matching (instance method)">#<strong>each_unique_file_matching</strong>(string)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#egrep_args-instance_method" title="#egrep_args (instance method)">#<strong>egrep_args</strong>  &#x21d2; Object </a>
    
    
      (also: #generic_egrep_args)
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#elf_files-instance_method" title="#elf_files (instance method)">#<strong>elf_files</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#elisp_installed%3F-instance_method" title="#elisp_installed? (instance method)">#<strong>elisp_installed?</strong>  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#empty_installation%3F-instance_method" title="#empty_installation? (instance method)">#<strong>empty_installation?</strong>  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#find_dylib-instance_method" title="#find_dylib (instance method)">#<strong>find_dylib</strong>(bad_name)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#find_dylib_suffix_from-instance_method" title="#find_dylib_suffix_from (instance method)">#<strong>find_dylib_suffix_from</strong>(bad_name)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#fix_dynamic_linkage-instance_method" title="#fix_dynamic_linkage (instance method)">#<strong>fix_dynamic_linkage</strong>  &#x21d2; Object </a>
    
    
      (also: #generic_fix_dynamic_linkage)
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#fixed_name-instance_method" title="#fixed_name (instance method)">#<strong>fixed_name</strong>(file, bad_name)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'><p>If file is a dylib or bundle itself, look for the dylib named by bad_name relative to the lib directory, so that we can skip the more expensive recursive search if possible.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#functions_installed%3F-instance_method" title="#functions_installed? (instance method)">#<strong>functions_installed?</strong>(shell)  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(path)  &#x21d2; Keg </a>
    
    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'><p>A new instance of Keg.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#lib-instance_method" title="#lib (instance method)">#<strong>lib</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#libexec-instance_method" title="#libexec (instance method)">#<strong>libexec</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#libtool_files-instance_method" title="#libtool_files (instance method)">#<strong>libtool_files</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#link-instance_method" title="#link (instance method)">#<strong>link</strong>(verbose: false, dry_run: false, overwrite: false)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#linked%3F-instance_method" title="#linked? (instance method)">#<strong>linked?</strong>  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#loader_name_for-instance_method" title="#loader_name_for (instance method)">#<strong>loader_name_for</strong>(file, target)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#lock-instance_method" title="#lock (instance method)">#<strong>lock</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#mach_o_files-instance_method" title="#mach_o_files (instance method)">#<strong>mach_o_files</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#oldname_opt_records-instance_method" title="#oldname_opt_records (instance method)">#<strong>oldname_opt_records</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#openjdk_dep_name_if_applicable-instance_method" title="#openjdk_dep_name_if_applicable (instance method)">#<strong>openjdk_dep_name_if_applicable</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#optlink-instance_method" title="#optlink (instance method)">#<strong>optlink</strong>(verbose: false, dry_run: false, overwrite: false)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#optlinked%3F-instance_method" title="#optlinked? (instance method)">#<strong>optlinked?</strong>  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#plist_installed%3F-instance_method" title="#plist_installed? (instance method)">#<strong>plist_installed?</strong>  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#prepare_codesign_writable_files-instance_method" title="#prepare_codesign_writable_files (instance method)">#<strong>prepare_codesign_writable_files</strong>(file)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#prepare_debug_symbols-instance_method" title="#prepare_debug_symbols (instance method)">#<strong>prepare_debug_symbols</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#prepare_relocation_to_locations-instance_method" title="#prepare_relocation_to_locations (instance method)">#<strong>prepare_relocation_to_locations</strong>  &#x21d2; Object </a>
    
    
      (also: #generic_prepare_relocation_to_locations)
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#prepare_relocation_to_placeholders-instance_method" title="#prepare_relocation_to_placeholders (instance method)">#<strong>prepare_relocation_to_placeholders</strong>  &#x21d2; Object </a>
    
    
      (also: #generic_prepare_relocation_to_placeholders)
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#python_pth_files_installed%3F-instance_method" title="#python_pth_files_installed? (instance method)">#<strong>python_pth_files_installed?</strong>  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#python_site_packages_installed%3F-instance_method" title="#python_site_packages_installed? (instance method)">#<strong>python_site_packages_installed?</strong>  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#rack-instance_method" title="#rack (instance method)">#<strong>rack</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#recursive_fgrep_args-instance_method" title="#recursive_fgrep_args (instance method)">#<strong>recursive_fgrep_args</strong>  &#x21d2; Object </a>
    
    
      (also: #generic_recursive_fgrep_args)
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#relocate_build_prefix-instance_method" title="#relocate_build_prefix (instance method)">#<strong>relocate_build_prefix</strong>(keg, old_prefix, new_prefix)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#relocate_dynamic_linkage-instance_method" title="#relocate_dynamic_linkage (instance method)">#<strong>relocate_dynamic_linkage</strong>(_relocation)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#relocated_name_for-instance_method" title="#relocated_name_for (instance method)">#<strong>relocated_name_for</strong>(old_name, relocation)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_linked_keg_record-instance_method" title="#remove_linked_keg_record (instance method)">#<strong>remove_linked_keg_record</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_old_aliases-instance_method" title="#remove_old_aliases (instance method)">#<strong>remove_old_aliases</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_oldname_opt_records-instance_method" title="#remove_oldname_opt_records (instance method)">#<strong>remove_oldname_opt_records</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_opt_record-instance_method" title="#remove_opt_record (instance method)">#<strong>remove_opt_record</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#replace_locations_with_placeholders-instance_method" title="#replace_locations_with_placeholders (instance method)">#<strong>replace_locations_with_placeholders</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#replace_placeholders_with_locations-instance_method" title="#replace_placeholders_with_locations (instance method)">#<strong>replace_placeholders_with_locations</strong>(files, skip_linkage: false)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#replace_text_in_files-instance_method" title="#replace_text_in_files (instance method)">#<strong>replace_text_in_files</strong>(relocation, files: nil)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#require_relocation%3F-instance_method" title="#require_relocation? (instance method)">#<strong>require_relocation?</strong>  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#runtime_dependencies-instance_method" title="#runtime_dependencies (instance method)">#<strong>runtime_dependencies</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#symlink_files-instance_method" title="#symlink_files (instance method)">#<strong>symlink_files</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#tab-instance_method" title="#tab (instance method)">#<strong>tab</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#text_files-instance_method" title="#text_files (instance method)">#<strong>text_files</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#to_formula-instance_method" title="#to_formula (instance method)">#<strong>to_formula</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#uninstall-instance_method" title="#uninstall (instance method)">#<strong>uninstall</strong>(raise_failures: false)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#unlink-instance_method" title="#unlink (instance method)">#<strong>unlink</strong>(verbose: false, dry_run: false)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#version-instance_method" title="#version (instance method)">#<strong>version</strong>  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Cachable.html" title="Cachable (module)">Cachable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Cachable.html#cache-instance_method" title="Cachable#cache (method)">cache</a></span>, <span class='object_link'><a href="Cachable.html#clear_cache-instance_method" title="Cachable#clear_cache (method)">clear_cache</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(path)  &#x21d2; <tt><span class='object_link'><a href="" title="Keg (class)">Keg</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>
<p>Returns a new instance of Keg.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163
164
165
166
167
168
169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_resolved_path'>resolved_path</span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/opt/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a valid keg</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_realpath'>realpath</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_CELLAR-constant" title="HOMEBREW_CELLAR (constant)">HOMEBREW_CELLAR</a></span></span><span class='period'>.</span><span class='id identifier rubyid_realpath'>realpath</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a directory</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>

  <span class='ivar'>@path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='ivar'>@linked_keg_record</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_LINKED_KEGS-constant" title="HOMEBREW_LINKED_KEGS (constant)">HOMEBREW_LINKED_KEGS</a></span></span><span class='op'>/</span><span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@opt_record</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>opt/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@oldname_opt_records</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@require_relocation</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="linked_keg_record-instance_method">
  
    #<strong>linked_keg_record</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span>
  <span class='ivar'>@linked_keg_record</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    #<strong>name</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="opt_record-instance_method">
  
    #<strong>opt_record</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_opt_record'>opt_record</span>
  <span class='ivar'>@opt_record</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all-class_method">
  
    .<strong>all</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 147</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span>
  <span class='const'><span class='object_link'><a href="Formula.html" title="Formula (class)">Formula</a></span></span><span class='period'>.</span><span class='id identifier rubyid_racks'>racks</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:subdirs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="file_linked_libraries-class_method">
  
    .<strong>file_linked_libraries</strong>(_file, _string)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10
11
12
13
14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_file_linked_libraries'>file_linked_libraries</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='comment'># Check dynamic library linkage. Importantly, do not perform for static
</span>  <span class='comment'># libraries, which will falsely report &quot;linkage&quot; to themselves.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_mach_o_executable?'>mach_o_executable?</span> <span class='op'>||</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib?'>dylib?</span> <span class='op'>||</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_mach_o_bundle?'>mach_o_bundle?</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dynamically_linked_libraries'>dynamically_linked_libraries</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_lib'>lib</span><span class='op'>|</span> <span class='id identifier rubyid_lib'>lib</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_string'>string</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="for-class_method">
  
    .<strong>for</strong>(path)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>if this is a file in a keg, returns the containing <span class='object_link'><a href="" title="Keg (class)">Keg</a></span> object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Errno::ENOENT</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141
142
143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 133</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='kw'>for</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_original_path'>original_path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span><span class='comma'>,</span> <span class='id identifier rubyid_original_path'>original_path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>unless</span> <span class='id identifier rubyid_original_path'>original_path</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_original_path'>original_path</span><span class='period'>.</span><span class='id identifier rubyid_realpath'>realpath</span><span class='rparen'>)</span>
    <span class='kw'>until</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_root?'>root?</span>
      <span class='kw'>return</span> <span class='const'><span class='object_link'><a href="" title="Keg (class)">Keg</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Keg#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_CELLAR-constant" title="HOMEBREW_CELLAR (constant)">HOMEBREW_CELLAR</a></span></span><span class='period'>.</span><span class='id identifier rubyid_realpath'>realpath</span>

      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_realpath'>realpath</span> <span class='comment'># realpath() prevents root? failing
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="NotAKegError.html" title="NotAKegError (class)">NotAKegError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_original_path'>original_path</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not inside a keg</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="text_matches_in_file-class_method">
  
    .<strong>text_matches_in_file</strong>(file, string, ignores, linked_libraries, formula_and_runtime_deps_names)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 325</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_text_matches_in_file'>text_matches_in_file</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_ignores'>ignores</span><span class='comma'>,</span> <span class='id identifier rubyid_linked_libraries'>linked_libraries</span><span class='comma'>,</span> <span class='id identifier rubyid_formula_and_runtime_deps_names'>formula_and_runtime_deps_names</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_text_matches'>text_matches</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_path_regex'>path_regex</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Keg/Relocation.html" title="Keg::Relocation (class)">Relocation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_path_to_regex'><span class='object_link'><a href="Keg/Relocation.html#path_to_regex-class_method" title="Keg::Relocation.path_to_regex (method)">path_to_regex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Utils.html" title="Utils (module)">Utils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_popen_read'><span class='object_link'><a href="Utils.html#popen_read-class_method" title="Utils.popen_read (method)">popen_read</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>strings</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-t</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='kw'>until</span> <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_eof?'>eof?</span>
      <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_readline'>readline</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_ignores'>ignores</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span> <span class='id identifier rubyid_path_regex'>path_regex</span>

      <span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span> <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span>

      <span class='comment'># Some binaries contain strings with lists of files
</span>      <span class='comment'># e.g. `/usr/local/lib/foo:/usr/local/share/foo:/usr/lib/foo`
</span>      <span class='comment'># Each item in the list should be checked separately
</span>      <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sub_match'>sub_match</span><span class='op'>|</span>
        <span class='comment'># Not all items in the list may be matches
</span>        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_sub_match'>sub_match</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span> <span class='id identifier rubyid_path_regex'>path_regex</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_linked_libraries'>linked_libraries</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_sub_match'>sub_match</span> <span class='comment'># Don&#39;t bother reporting a string if it was found by otool
</span>
        <span class='comment'># Do not report matches to files that do not exist.
</span>        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_sub_match'>sub_match</span>

        <span class='comment'># Do not report matches to build dependencies.
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_formula_and_runtime_deps_names'>formula_and_runtime_deps_names</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
          <span class='kw'>begin</span>
            <span class='id identifier rubyid_keg_name'>keg_name</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Keg (class)">Keg</a></span></span><span class='period'>.</span><span class='id identifier rubyid_for'><span class='object_link'><a href="#for-class_method" title="Keg.for (method)">for</a></span></span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_sub_match'>sub_match</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_formula_and_runtime_deps_names'>formula_and_runtime_deps_names</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_keg_name'>keg_name</span>
          <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="NotAKegError.html" title="NotAKegError (class)">NotAKegError</a></span></span>
            <span class='kw'>nil</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_text_matches'>text_matches</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_match'>match</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_text_matches'>text_matches</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_text'>text</span><span class='op'>|</span> <span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span> <span class='op'>==</span> <span class='id identifier rubyid_offset'>offset</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_text_matches'>text_matches</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="==-instance_method">
  
    #<strong>==</strong>(other)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='eql?-instance_method'>eql?</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 185</span>

<span class='kw'>def</span> <span class='op'>==</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="aliases-instance_method">
  
    #<strong>aliases</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


509
510
511</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 509</span>

<span class='kw'>def</span> <span class='id identifier rubyid_aliases'>aliases</span>
  <span class='id identifier rubyid_tab'>tab</span><span class='period'>.</span><span class='id identifier rubyid_aliases'>aliases</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="apps-instance_method">
  
    #<strong>apps</strong>  &#x21d2; <tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376
377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 374</span>

<span class='kw'>def</span> <span class='id identifier rubyid_apps'>apps</span>
  <span class='id identifier rubyid_app_prefix'>app_prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_optlinked?'>optlinked?</span> <span class='op'>?</span> <span class='id identifier rubyid_opt_record'>opt_record</span> <span class='op'>:</span> <span class='id identifier rubyid_path'>path</span>
  <span class='const'><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_app_prefix'>app_prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>/{,libexec/}*.app</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="binary_executable_or_library_files-instance_method">
  
    #<strong>binary_executable_or_library_files</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_binary_executable_or_library_files'>binary_executable_or_library_files</span>
  <span class='id identifier rubyid_mach_o_files'>mach_o_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="binary_file?-instance_method">
  
    #<strong>binary_file?</strong>(file)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


243
244
245
246
247
248
249
250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 243</span>

<span class='kw'>def</span> <span class='id identifier rubyid_binary_file?'>binary_file?</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_grep_bin'>grep_bin</span><span class='comma'>,</span> <span class='id identifier rubyid_grep_args'>grep_args</span> <span class='op'>=</span> <span class='id identifier rubyid_egrep_args'>egrep_args</span>

  <span class='comment'># We need to pass NULL_BYTE_STRING, the literal string &quot;\x00&quot;, to grep
</span>  <span class='comment'># rather than NULL_BYTE, a literal null byte, because grep will internally
</span>  <span class='comment'># convert the literal string &quot;\x00&quot; to a null byte.
</span>  <span class='const'><span class='object_link'><a href="Utils.html" title="Utils (module)">Utils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_popen_read'><span class='object_link'><a href="Utils.html#popen_read-class_method" title="Utils.popen_read (method)">popen_read</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_grep_bin'>grep_bin</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_grep_args'>grep_args</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#NULL_BYTE_STRING-constant" title="Keg::NULL_BYTE_STRING (constant)">NULL_BYTE_STRING</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="change_dylib_id-instance_method">
  
    #<strong>change_dylib_id</strong>(id, file)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'os/mac/keg.rb', line 6</span>

<span class='kw'>def</span> <span class='id identifier rubyid_change_dylib_id'>change_dylib_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib_id'>dylib_id</span> <span class='op'>==</span> <span class='id identifier rubyid_id'>id</span>

  <span class='ivar'>@require_relocation</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_odebug'>odebug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Changing dylib ID of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n  from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib_id'>dylib_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n    to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_change_dylib_id'>change_dylib_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>strict:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>rescue</span> <span class='const'>MachO</span><span class='op'>::</span><span class='const'>MachOError</span>
  <span class='id identifier rubyid_onoe'>onoe</span> <span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='tstring_content'>    Failed changing dylib ID of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='tstring_content'>      from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib_id'>dylib_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='tstring_content'>        to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>  EOS
</span>  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="change_install_name-instance_method">
  
    #<strong>change_install_name</strong>(old, new, file)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>old</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>new</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'os/mac/keg.rb', line 23</span>

<span class='kw'>def</span> <span class='id identifier rubyid_change_install_name'>change_install_name</span><span class='lparen'>(</span><span class='id identifier rubyid_old'>old</span><span class='comma'>,</span> <span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_old'>old</span> <span class='op'>==</span> <span class='id identifier rubyid_new'>new</span>

  <span class='ivar'>@require_relocation</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_odebug'>odebug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Changing install name in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n  from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_old'>old</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n    to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new'>new</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_change_install_name'>change_install_name</span><span class='lparen'>(</span><span class='id identifier rubyid_old'>old</span><span class='comma'>,</span> <span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='label'>strict:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>rescue</span> <span class='const'>MachO</span><span class='op'>::</span><span class='const'>MachOError</span>
  <span class='id identifier rubyid_onoe'>onoe</span> <span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='tstring_content'>    Failed changing install name in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='tstring_content'>      from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_old'>old</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='tstring_content'>        to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new'>new</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>  EOS
</span>  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="change_rpath-instance_method">
  
    #<strong>change_rpath</strong>(old, new, file)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/linux/keg_relocate.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_change_rpath'>change_rpath</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_elf?'>elf?</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dynamic_elf?'>dynamic_elf?</span>

  <span class='id identifier rubyid_updated'>updated</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_old_rpath'>old_rpath</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rpath'>rpath</span>
  <span class='id identifier rubyid_new_rpath'>new_rpath</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_old_rpath'>old_rpath</span>
    <span class='id identifier rubyid_rpath'>rpath</span> <span class='op'>=</span> <span class='id identifier rubyid_old_rpath'>old_rpath</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                     <span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
                     <span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$ORIGIN</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>

    <span class='id identifier rubyid_lib_path'>lib_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>/lib</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_rpath'>rpath</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_lib_path'>lib_path</span> <span class='kw'>unless</span> <span class='id identifier rubyid_rpath'>rpath</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_lib_path'>lib_path</span>

    <span class='comment'># Add GCC&#39;s lib directory (as of GCC 12+) to RPATH when there is existing versioned linkage.
</span>    <span class='comment'># This prevents broken linkage when pouring bottles built with an old GCC formula.
</span>    <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Version.html" title="Version (class)">Version</a></span></span><span class='period'>.</span><span class='id identifier rubyid_formula_optionally_versioned_regex'><span class='object_link'><a href="Version.html#formula_optionally_versioned_regex-class_method" title="Version.formula_optionally_versioned_regex (method)">formula_optionally_versioned_regex</a></span></span><span class='lparen'>(</span><span class='symbol'>:gcc</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_rpath'>rpath</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_rp'>rp</span><span class='op'>|</span> <span class='id identifier rubyid_rp'>rp</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>lib/gcc/\d+$</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lib/gcc/current</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_rpath'>rpath</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_updated'>updated</span><span class='lbracket'>[</span><span class='symbol'>:rpath</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_new_rpath'>new_rpath</span> <span class='kw'>if</span> <span class='id identifier rubyid_old_rpath'>old_rpath</span> <span class='op'>!=</span> <span class='id identifier rubyid_new_rpath'>new_rpath</span>

  <span class='id identifier rubyid_old_interpreter'>old_interpreter</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_interpreter'>interpreter</span>
  <span class='id identifier rubyid_new_interpreter'>new_interpreter</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_old_interpreter'>old_interpreter</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>nil</span>
  <span class='kw'>elsif</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_readable?'>readable?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>/lib/ld.so</span><span class='tstring_end'>&quot;</span></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>/lib/ld.so</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_old_interpreter'>old_interpreter</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span> <span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_new_prefix'>new_prefix</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_updated'>updated</span><span class='lbracket'>[</span><span class='symbol'>:interpreter</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_new_interpreter'>new_interpreter</span> <span class='kw'>if</span> <span class='id identifier rubyid_old_interpreter'>old_interpreter</span> <span class='op'>!=</span> <span class='id identifier rubyid_new_interpreter'>new_interpreter</span>

  <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_patch!'>patch!</span><span class='lparen'>(</span><span class='label'>interpreter:</span> <span class='id identifier rubyid_updated'>updated</span><span class='lbracket'>[</span><span class='symbol'>:interpreter</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>rpath:</span> <span class='id identifier rubyid_updated'>updated</span><span class='lbracket'>[</span><span class='symbol'>:rpath</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="codesign_patched_binary-instance_method">
  
    #<strong>codesign_patched_binary</strong>(file)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_codesign_patched_binary'>codesign_patched_binary</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'>MacOS</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span> <span class='op'>&lt;</span> <span class='symbol'>:big_sur</span>

  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="Hardware.html" title="Hardware (module)">Hardware</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Hardware/CPU.html" title="Hardware::CPU (class)">CPU</a></span></span><span class='period'>.</span><span class='id identifier rubyid_arm?'><span class='object_link'><a href="Hardware/CPU.html#arm%3F-class_method" title="Hardware::CPU.arm? (method)">arm?</a></span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_system_command'><span class='object_link'><a href="SystemCommand/Mixin.html#system_command-instance_method" title="SystemCommand::Mixin#system_command (method)">system_command</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>codesign</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>args:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--verify</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>print_stderr:</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_stderr'>stderr</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>invalid signature</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_odebug'>odebug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Codesigning </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_prepare_codesign_writable_files'>prepare_codesign_writable_files</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'># Use quiet_system to squash notifications about resigning binaries
</span>    <span class='comment'># which already have valid signatures.
</span>    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_quiet_system'>quiet_system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>codesign</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--sign</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--force</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                           <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--preserve-metadata=entitlements,requirements,flags,runtime</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                           <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>

    <span class='comment'># If the codesigning fails, it may be a bug in Apple&#39;s codesign utility
</span>    <span class='comment'># A known workaround is to copy the file to another inode, then move it back
</span>    <span class='comment'># erasing the previous file. Then sign again.
</span>    <span class='comment'>#
</span>    <span class='comment'># TODO: remove this once the bug in Apple&#39;s codesign utility is fixed
</span>    <span class='const'>Dir</span><span class='op'>::</span><span class='const'>Tmpname</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>workaround</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tmppath'>tmppath</span><span class='op'>|</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_cp'>cp</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_tmppath'>tmppath</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mv'>mv</span> <span class='id identifier rubyid_tmppath'>tmppath</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='label'>force:</span> <span class='kw'>true</span>
    <span class='kw'>end</span>

    <span class='comment'># Try signing again
</span>    <span class='id identifier rubyid_odebug'>odebug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Codesigning (2nd try) </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_system_command'><span class='object_link'><a href="SystemCommand/Mixin.html#system_command-instance_method" title="SystemCommand::Mixin#system_command (method)">system_command</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>codesign</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>args:</span> <span class='lbracket'>[</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--sign</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--force</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--preserve-metadata=entitlements,requirements,flags,runtime</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='id identifier rubyid_file'>file</span>
    <span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>print_stderr:</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>

    <span class='comment'># If it fails again, error out
</span>    <span class='id identifier rubyid_onoe'>onoe</span> <span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='tstring_content'>      Failed applying an ad-hoc signature to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_content'>:
</span><span class='tstring_content'>      </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_stderr'>stderr</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>    EOS
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="completion_installed?-instance_method">
  
    #<strong>completion_installed?</strong>(shell)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


335
336
337
338
339
340
341
342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 335</span>

<span class='kw'>def</span> <span class='id identifier rubyid_completion_installed?'>completion_installed?</span><span class='lparen'>(</span><span class='id identifier rubyid_shell'>shell</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_shell'>shell</span>
  <span class='kw'>when</span> <span class='symbol'>:bash</span> <span class='kw'>then</span> <span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/bash_completion.d</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='symbol'>:zsh</span>
    <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>share/zsh/site-functions</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_dir'>dir</span> <span class='kw'>if</span> <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>when</span> <span class='symbol'>:fish</span> <span class='kw'>then</span> <span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>share/fish/vendor_completions.d</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_dir'>dir</span><span class='op'>&amp;.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="consistent_reproducible_symlink_permissions!-instance_method">
  
    #<strong>consistent_reproducible_symlink_permissions!</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>
<p>Needed to make symlink permissions consistent on macOS and Linux for
reproducible bottles.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_consistent_reproducible_symlink_permissions!'>consistent_reproducible_symlink_permissions!</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_lchmod'>lchmod</span> <span class='int'>0777</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_pyc_files!-instance_method">
  
    #<strong>delete_pyc_files!</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


528
529
530
531</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 528</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_pyc_files!'>delete_pyc_files!</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pn'>pn</span><span class='op'>|</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#PYC_EXTENSIONS-constant" title="Keg::PYC_EXTENSIONS (constant)">PYC_EXTENSIONS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_extname'>extname</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pn'>pn</span><span class='op'>|</span> <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_pn'>pn</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__pycache__</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_rpath-instance_method">
  
    #<strong>delete_rpath</strong>(rpath, file)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rpath</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MachOShim.html" title="MachOShim (module)">MachOShim</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'os/mac/keg.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_rpath'>delete_rpath</span><span class='lparen'>(</span><span class='id identifier rubyid_rpath'>rpath</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_odebug'>odebug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Deleting rpath </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rpath'>rpath</span><span class='embexpr_end'>}</span><span class='tstring_content'> in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete_rpath'>delete_rpath</span><span class='lparen'>(</span><span class='id identifier rubyid_rpath'>rpath</span><span class='comma'>,</span> <span class='label'>strict:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>rescue</span> <span class='const'>MachO</span><span class='op'>::</span><span class='const'>MachOError</span>
  <span class='id identifier rubyid_onoe'>onoe</span> <span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='tstring_content'>    Failed deleting rpath </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rpath'>rpath</span><span class='embexpr_end'>}</span><span class='tstring_content'> in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>  EOS
</span>  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="detect_cxx_stdlibs-instance_method">
  
    #<strong>detect_cxx_stdlibs</strong>(_options = {})  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/linux/keg_relocate.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_detect_cxx_stdlibs'>detect_cxx_stdlibs</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_skip_executables'>skip_executables</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:skip_executables</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_elf_files'>elf_files</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dynamic_elf?'>dynamic_elf?</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_binary_executable?'>binary_executable?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_skip_executables'>skip_executables</span>

    <span class='id identifier rubyid_dylibs'>dylibs</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dynamically_linked_libraries'>dynamically_linked_libraries</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:libcxx</span> <span class='kw'>if</span> <span class='id identifier rubyid_dylibs'>dylibs</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>libc++.so</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:libstdcxx</span> <span class='kw'>if</span> <span class='id identifier rubyid_dylibs'>dylibs</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>libstdc++.so</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dylib_id_for-instance_method">
  
    #<strong>dylib_id_for</strong>(file)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dylib_id_for'>dylib_id_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='comment'># The new dylib ID should have the same basename as the old dylib ID, not
</span>  <span class='comment'># the basename of the file itself.
</span>  <span class='id identifier rubyid_basename'>basename</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib_id'>dylib_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_relative_dirname'>relative_dirname</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='period'>.</span><span class='id identifier rubyid_relative_path_from'>relative_path_from</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_opt_record'>opt_record</span><span class='op'>/</span><span class='id identifier rubyid_relative_dirname'>relative_dirname</span><span class='op'>/</span><span class='id identifier rubyid_basename'>basename</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_linkage_for-instance_method">
  
    #<strong>each_linkage_for</strong>(file, linkage_type, resolve_variable_references: false, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_linkage_for'>each_linkage_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_linkage_type'>linkage_type</span><span class='comma'>,</span> <span class='label'>resolve_variable_references:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_linkage_type'>linkage_type</span><span class='comma'>,</span> <span class='label'>resolve_variable_references:</span> <span class='id identifier rubyid_resolve_variable_references'>resolve_variable_references</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_grep_v'>grep_v</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#VARIABLE_REFERENCE_RX-constant" title="Keg::VARIABLE_REFERENCE_RX (constant)">VARIABLE_REFERENCE_RX</a></span></span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_unique_file_matching-instance_method">
  
    #<strong>each_unique_file_matching</strong>(string)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229
230
231
232
233
234
235
236
237
238
239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 227</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_unique_file_matching'>each_unique_file_matching</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Utils.html" title="Utils (module)">Utils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_popen_read'><span class='object_link'><a href="Utils.html#popen_read-class_method" title="Utils.popen_read (method)">popen_read</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fgrep</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_recursive_fgrep_args'>recursive_fgrep_args</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='id identifier rubyid_hardlinks'>hardlinks</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='kw'>until</span> <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_eof?'>eof?</span>
      <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_readline'>readline</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='rparen'>)</span>
      <span class='comment'># Don&#39;t return symbolic links.
</span>      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span>

      <span class='comment'># To avoid returning hardlinks, only return files with unique inodes.
</span>      <span class='comment'># Hardlinks will have the same inode as the file they point to.
</span>      <span class='kw'>yield</span> <span class='id identifier rubyid_file'>file</span> <span class='kw'>if</span> <span class='id identifier rubyid_hardlinks'>hardlinks</span><span class='period'>.</span><span class='id identifier rubyid_add?'>add?</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_ino'>ino</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="egrep_args-instance_method">
  
    #<strong>egrep_args</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='generic_egrep_args-instance_method'>generic_egrep_args</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


228
229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 228</span>

<span class='kw'>def</span> <span class='id identifier rubyid_egrep_args'>egrep_args</span>
  <span class='id identifier rubyid_grep_bin'>grep_bin</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>egrep</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_grep_args'>grep_args</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--files-with-matches</span><span class='tstring_end'>&quot;</span></span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_grep_bin'>grep_bin</span><span class='comma'>,</span> <span class='id identifier rubyid_grep_args'>grep_args</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="elf_files-instance_method">
  
    #<strong>elf_files</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/linux/keg_relocate.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_elf_files'>elf_files</span>
  <span class='id identifier rubyid_hardlinks'>hardlinks</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_elf_files'>elf_files</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pn'>pn</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>||</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_dylib?'>dylib?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_binary_executable?'>binary_executable?</span>

    <span class='comment'># If we&#39;ve already processed a file, ignore its hardlinks (which have the
</span>    <span class='comment'># same dev ID and inode). This prevents relocations from being performed
</span>    <span class='comment'># on a binary more than once.
</span>    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_hardlinks'>hardlinks</span><span class='period'>.</span><span class='id identifier rubyid_add?'>add?</span> <span class='lbracket'>[</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_dev'>dev</span><span class='comma'>,</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_ino'>ino</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_elf_files'>elf_files</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pn'>pn</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_elf_files'>elf_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="elisp_installed?-instance_method">
  
    #<strong>elisp_installed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


379
380
381
382
383</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 379</span>

<span class='kw'>def</span> <span class='id identifier rubyid_elisp_installed?'>elisp_installed?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>share/emacs/site-lisp</span><span class='tstring_end'>&quot;</span></span><span class='op'>/</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span>

  <span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>share/emacs/site-lisp</span><span class='tstring_end'>&quot;</span></span><span class='op'>/</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="#ELISP_EXTENSIONS-constant" title="Keg::ELISP_EXTENSIONS (constant)">ELISP_EXTENSIONS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_extname'>extname</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="empty_installation?-instance_method">
  
    #<strong>empty_installation?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_empty_installation?'>empty_installation?</span>
  <span class='const'><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:ds_store?</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='id identifier rubyid_basename'>basename</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="Metafiles.html" title="Metafiles (module)">Metafiles</a></span></span><span class='period'>.</span><span class='id identifier rubyid_copy?'><span class='object_link'><a href="Metafiles.html#copy%3F-class_method" title="Metafiles.copy? (method)">copy?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_basename'>basename</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>.DS_Store</span><span class='words_sep'> </span><span class='tstring_content'>INSTALL_RECEIPT.json</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_basename'>basename</span><span class='rparen'>)</span>

    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_dylib-instance_method">
  
    #<strong>find_dylib</strong>(bad_name)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_dylib'>find_dylib</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_lib'>lib</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>

  <span class='id identifier rubyid_suffix'>suffix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_find_dylib_suffix_from'>find_dylib_suffix_from</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_lib'>lib</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pn'>pn</span><span class='op'>|</span> <span class='kw'>break</span> <span class='id identifier rubyid_pn'>pn</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='id identifier rubyid_suffix'>suffix</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_dylib_suffix_from-instance_method">
  
    #<strong>find_dylib_suffix_from</strong>(bad_name)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_dylib_suffix_from'>find_dylib_suffix_from</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_framework'>framework</span> <span class='op'>=</span> <span class='id identifier rubyid_bad_name'>bad_name</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#FRAMEWORK_RX-constant" title="Keg::FRAMEWORK_RX (constant)">FRAMEWORK_RX</a></span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_framework'>framework</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fix_dynamic_linkage-instance_method">
  
    #<strong>fix_dynamic_linkage</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='generic_fix_dynamic_linkage-instance_method'>generic_fix_dynamic_linkage</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fix_dynamic_linkage'>fix_dynamic_linkage</span>
  <span class='id identifier rubyid_mach_o_files'>mach_o_files</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_ensure_writable'>ensure_writable</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='const'>T</span><span class='period'>.</span><span class='id identifier rubyid_let'>let</span><span class='lparen'>(</span><span class='kw'>false</span><span class='comma'>,</span> <span class='const'>T</span><span class='op'>::</span><span class='const'>Boolean</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>=</span> <span class='const'>T</span><span class='period'>.</span><span class='id identifier rubyid_let'>let</span><span class='lparen'>(</span><span class='kw'>false</span><span class='comma'>,</span> <span class='const'>T</span><span class='op'>::</span><span class='const'>Boolean</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='id identifier rubyid_change_dylib_id'>change_dylib_id</span><span class='lparen'>(</span><span class='id identifier rubyid_dylib_id_for'>dylib_id_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib?'>dylib?</span>
      <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>||=</span> <span class='id identifier rubyid_modified'>modified</span>

      <span class='id identifier rubyid_each_linkage_for'>each_linkage_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='symbol'>:dynamically_linked_libraries</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='op'>|</span>
        <span class='comment'># Don&#39;t fix absolute paths unless they are rooted in the build directory.
</span>        <span class='id identifier rubyid_new_name'>new_name</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_bad_name'>bad_name</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_rooted_in_build_directory?'>rooted_in_build_directory?</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_bad_name'>bad_name</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_fixed_name'>fixed_name</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_loader_name'>loader_name</span> <span class='op'>=</span> <span class='id identifier rubyid_loader_name_for'>loader_name_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='id identifier rubyid_change_install_name'>change_install_name</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='comma'>,</span> <span class='id identifier rubyid_loader_name'>loader_name</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_loader_name'>loader_name</span> <span class='op'>!=</span> <span class='id identifier rubyid_bad_name'>bad_name</span>
        <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>||=</span> <span class='id identifier rubyid_modified'>modified</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_each_linkage_for'>each_linkage_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='symbol'>:rpaths</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='op'>|</span>
        <span class='id identifier rubyid_new_name'>new_name</span> <span class='op'>=</span> <span class='id identifier rubyid_opt_name_for'>opt_name_for</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_loader_name'>loader_name</span> <span class='op'>=</span> <span class='id identifier rubyid_loader_name_for'>loader_name_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span><span class='rparen'>)</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_loader_name'>loader_name</span> <span class='op'>==</span> <span class='id identifier rubyid_bad_name'>bad_name</span>

        <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='id identifier rubyid_change_rpath'>change_rpath</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='comma'>,</span> <span class='id identifier rubyid_loader_name'>loader_name</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>||=</span> <span class='id identifier rubyid_modified'>modified</span>
      <span class='kw'>end</span>

      <span class='comment'># Strip duplicate rpaths and rpaths rooted in the build directory.
</span>      <span class='comment'># We do this separately from the rpath relocation above to avoid
</span>      <span class='comment'># failing to relocate an rpath whose variable duplicate we deleted.
</span>      <span class='id identifier rubyid_each_linkage_for'>each_linkage_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='symbol'>:rpaths</span><span class='comma'>,</span> <span class='label'>resolve_variable_references:</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_rooted_in_build_directory?'>rooted_in_build_directory?</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rpaths'>rpaths</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>1</span>

        <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='id identifier rubyid_delete_rpath'>delete_rpath</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>||=</span> <span class='id identifier rubyid_modified'>modified</span>
      <span class='kw'>end</span>

      <span class='comment'># codesign the file if needed
</span>      <span class='id identifier rubyid_codesign_patched_binary'>codesign_patched_binary</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_generic_fix_dynamic_linkage'>generic_fix_dynamic_linkage</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fixed_name-instance_method">
  
    #<strong>fixed_name</strong>(file, bad_name)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>If file is a dylib or bundle itself, look for the dylib named by
bad_name relative to the lib directory, so that we can skip the more
expensive recursive search if possible.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fixed_name'>fixed_name</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_bad_name'>bad_name</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span> <span class='const'><span class='object_link'><a href="#PREFIX_PLACEHOLDER-constant" title="Keg::PREFIX_PLACEHOLDER (constant)">PREFIX_PLACEHOLDER</a></span></span>
    <span class='id identifier rubyid_bad_name'>bad_name</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#PREFIX_PLACEHOLDER-constant" title="Keg::PREFIX_PLACEHOLDER (constant)">PREFIX_PLACEHOLDER</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_bad_name'>bad_name</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span> <span class='const'><span class='object_link'><a href="#CELLAR_PLACEHOLDER-constant" title="Keg::CELLAR_PLACEHOLDER (constant)">CELLAR_PLACEHOLDER</a></span></span>
    <span class='id identifier rubyid_bad_name'>bad_name</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#CELLAR_PLACEHOLDER-constant" title="Keg::CELLAR_PLACEHOLDER (constant)">CELLAR_PLACEHOLDER</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_CELLAR-constant" title="HOMEBREW_CELLAR (constant)">HOMEBREW_CELLAR</a></span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib?'>dylib?</span> <span class='op'>||</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_mach_o_bundle?'>mach_o_bundle?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='op'>/</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@loader_path/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_mach_o_executable?'>mach_o_executable?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_lib'>lib</span><span class='op'>/</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lib'>lib</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_mach_o_executable?'>mach_o_executable?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_libexec'>libexec</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lib</span><span class='tstring_end'>&quot;</span></span><span class='op'>/</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_libexec'>libexec</span><span class='embexpr_end'>}</span><span class='tstring_content'>/lib/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_abs_name'>abs_name</span> <span class='op'>=</span> <span class='id identifier rubyid_find_dylib'>find_dylib</span><span class='lparen'>(</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_abs_name'>abs_name</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span>
    <span class='id identifier rubyid_abs_name'>abs_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_opoo'>opoo</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Could not fix </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bad_name'>bad_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_bad_name'>bad_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="functions_installed?-instance_method">
  
    #<strong>functions_installed?</strong>(shell)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348
349
350
351
352
353
354
355
356
357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 346</span>

<span class='kw'>def</span> <span class='id identifier rubyid_functions_installed?'>functions_installed?</span><span class='lparen'>(</span><span class='id identifier rubyid_shell'>shell</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_shell'>shell</span>
  <span class='kw'>when</span> <span class='symbol'>:fish</span>
    <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>share/fish/vendor_functions.d</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>when</span> <span class='symbol'>:zsh</span>
    <span class='comment'># Check for non completion functions (i.e. files not started with an underscore),
</span>    <span class='comment'># since those can be checked separately
</span>    <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>share/zsh/site-functions</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lib-instance_method">
  
    #<strong>lib</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 252</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lib'>lib</span>
  <span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lib</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="libexec-instance_method">
  
    #<strong>libexec</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


256
257
258</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 256</span>

<span class='kw'>def</span> <span class='id identifier rubyid_libexec'>libexec</span>
  <span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>libexec</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="libtool_files-instance_method">
  
    #<strong>libtool_files</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307
308
309
310
311
312
313
314</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 305</span>

<span class='kw'>def</span> <span class='id identifier rubyid_libtool_files'>libtool_files</span>
  <span class='id identifier rubyid_libtool_files'>libtool_files</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pn'>pn</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>||</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="" title="Keg (class)">Keg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="#LIBTOOL_EXTENSIONS-constant" title="Keg::LIBTOOL_EXTENSIONS (constant)">LIBTOOL_EXTENSIONS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_exclude?'>exclude?</span><span class='lparen'>(</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_extname'>extname</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_libtool_files'>libtool_files</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pn'>pn</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_libtool_files'>libtool_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="link-instance_method">
  
    #<strong>link</strong>(verbose: false, dry_run: false, overwrite: false)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 406</span>

<span class='kw'>def</span> <span class='id identifier rubyid_link'>link</span><span class='lparen'>(</span><span class='label'>verbose:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Keg/AlreadyLinkedError.html" title="Keg::AlreadyLinkedError (class)">AlreadyLinkedError</a></span></span><span class='comma'>,</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>

  <span class='const'>ObserverPathnameExtension</span><span class='period'>.</span><span class='id identifier rubyid_reset_counts!'>reset_counts!</span>

  <span class='id identifier rubyid_optlink'>optlink</span><span class='lparen'>(</span><span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_dry_run'>dry_run</span>

  <span class='comment'># yeah indeed, you have to force anything you need in the main tree into
</span>  <span class='comment'># these dirs REMEMBER that *NOT* everything needs to be in the main tree
</span>  <span class='id identifier rubyid_link_dir'>link_dir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='symbol'>:mkpath</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_link_dir'>link_dir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bin</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='symbol'>:skip_dir</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_link_dir'>link_dir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sbin</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='symbol'>:skip_dir</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_link_dir'>link_dir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>include</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='symbol'>:link</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_link_dir'>link_dir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>share</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_relative_path'>relative_path</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_relative_path'>relative_path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="#INFOFILE_RX-constant" title="Keg::INFOFILE_RX (constant)">INFOFILE_RX</a></span></span> <span class='kw'>then</span> <span class='symbol'>:info</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>locale/locale.alias</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^icons/.*/icon-theme\.cache$</span><span class='regexp_end'>}</span></span>
      <span class='symbol'>:skip_file</span>
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="#LOCALEDIR_RX-constant" title="Keg::LOCALEDIR_RX (constant)">LOCALEDIR_RX</a></span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^icons/</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='comment'># all icons subfolders should also mkpath
</span>         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^zsh</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^fish</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^lua/</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='comment'>#  Lua, Lua51, Lua53 all need the same handling.
</span>         <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^guile/</span><span class='regexp_end'>}</span></span><span class='comma'>,</span>
         <span class='op'>*</span><span class='const'><span class='object_link'><a href="#SHARE_PATHS-constant" title="Keg::SHARE_PATHS (constant)">SHARE_PATHS</a></span></span>
      <span class='symbol'>:mkpath</span>
    <span class='kw'>else</span>
      <span class='symbol'>:link</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_link_dir'>link_dir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lib</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_relative_path'>relative_path</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_relative_path'>relative_path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>charset.alias</span><span class='tstring_end'>&quot;</span></span>
      <span class='symbol'>:skip_file</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pkgconfig</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'># pkg-config database gets explicitly created
</span>         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cmake</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>     <span class='comment'># cmake database gets explicitly created
</span>         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dtrace</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>    <span class='comment'># lib/language folders also get explicitly created
</span>         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^gdk-pixbuf</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ghc</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^gio</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^lua</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^mecab</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^node</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^ocaml</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^perl5</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>php</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^python[23]\.\d+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^R</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^ruby</span><span class='regexp_end'>/</span></span>
      <span class='symbol'>:mkpath</span>
    <span class='kw'>else</span>
      <span class='comment'># Everything else is symlinked to the cellar
</span>      <span class='symbol'>:link</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_link_dir'>link_dir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Frameworks</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_relative_path'>relative_path</span><span class='op'>|</span>
    <span class='comment'># Frameworks contain symlinks pointing into a subdir, so we have to use
</span>    <span class='comment'># the :link strategy. However, for Foo.framework and
</span>    <span class='comment'># Foo.framework/Versions we have to use :mkpath so that multiple formulae
</span>    <span class='comment'># can link their versions into it and `brew [un]link` works.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_relative_path'>relative_path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>[^/]*\.framework(/Versions)?$</span><span class='regexp_end'>}</span></span><span class='rparen'>)</span>
      <span class='symbol'>:mkpath</span>
    <span class='kw'>else</span>
      <span class='symbol'>:link</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_dry_run'>dry_run</span>
    <span class='id identifier rubyid_make_relative_symlink'>make_relative_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="Keg/LinkError.html" title="Keg::LinkError (class)">LinkError</a></span></span>
  <span class='id identifier rubyid_unlink'>unlink</span><span class='lparen'>(</span><span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>else</span>
  <span class='const'>ObserverPathnameExtension</span><span class='period'>.</span><span class='id identifier rubyid_n'>n</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="linked?-instance_method">
  
    #<strong>linked?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 209</span>

<span class='kw'>def</span> <span class='id identifier rubyid_linked?'>linked?</span>
  <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='period'>.</span><span class='id identifier rubyid_resolved_path'>resolved_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="loader_name_for-instance_method">
  
    #<strong>loader_name_for</strong>(file, target)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105
106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_loader_name_for'>loader_name_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_target'>target</span><span class='rparen'>)</span>
  <span class='comment'># Use @loader_path-relative install names for other Homebrew-installed binaries.
</span>  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="ENV.html" title="ENV (class)">ENV</a></span></span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HOMEBREW_RELOCATABLE_INSTALL_NAMES</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_target'>target</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_dylib_suffix'>dylib_suffix</span> <span class='op'>=</span> <span class='id identifier rubyid_find_dylib_suffix_from'>find_dylib_suffix_from</span><span class='lparen'>(</span><span class='id identifier rubyid_target'>target</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_target_dir'>target_dir</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_target'>target</span><span class='period'>.</span><span class='id identifier rubyid_delete_suffix'>delete_suffix</span><span class='lparen'>(</span><span class='id identifier rubyid_dylib_suffix'>dylib_suffix</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_cleanpath'>cleanpath</span>

    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@loader_path/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target_dir'>target_dir</span><span class='period'>.</span><span class='id identifier rubyid_relative_path_from'>relative_path_from</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='rparen'>)</span><span class='op'>/</span><span class='id identifier rubyid_dylib_suffix'>dylib_suffix</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_target'>target</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lock-instance_method">
  
    #<strong>lock</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


323
324
325
326
327
328
329
330
331
332
333</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 323</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lock'>lock</span>
  <span class='const'><span class='object_link'><a href="FormulaLock.html" title="FormulaLock (class)">FormulaLock</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FormulaLock.html#initialize-instance_method" title="FormulaLock#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_with_lock'><span class='object_link'><a href="LockFile.html#with_lock-instance_method" title="LockFile#with_lock (method)">with_lock</a></span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_oldname_locks'>oldname_locks</span> <span class='op'>=</span> <span class='id identifier rubyid_oldname_opt_records'>oldname_opt_records</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
      <span class='const'><span class='object_link'><a href="FormulaLock.html" title="FormulaLock (class)">FormulaLock</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FormulaLock.html#initialize-instance_method" title="FormulaLock#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_oldname_locks'>oldname_locks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:lock</span><span class='rparen'>)</span>
    <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_oldname_locks'>oldname_locks</span><span class='op'>&amp;.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:unlock</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mach_o_files-instance_method">
  
    #<strong>mach_o_files</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


179
180
181
182
183
184
185
186
187
188
189
190
191
192
193</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 179</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mach_o_files'>mach_o_files</span>
  <span class='id identifier rubyid_hardlinks'>hardlinks</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_mach_o_files'>mach_o_files</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pn'>pn</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>||</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_dylib?'>dylib?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_mach_o_bundle?'>mach_o_bundle?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_mach_o_executable?'>mach_o_executable?</span>
    <span class='comment'># if we&#39;ve already processed a file, ignore its hardlinks (which have the same dev ID and inode)
</span>    <span class='comment'># this prevents relocations from being performed on a binary more than once
</span>    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_hardlinks'>hardlinks</span><span class='period'>.</span><span class='id identifier rubyid_add?'>add?</span> <span class='lbracket'>[</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_dev'>dev</span><span class='comma'>,</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_ino'>ino</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_mach_o_files'>mach_o_files</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pn'>pn</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_mach_o_files'>mach_o_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="oldname_opt_records-instance_method">
  
    #<strong>oldname_opt_records</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396
397
398
399
400
401
402
403
404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 394</span>

<span class='kw'>def</span> <span class='id identifier rubyid_oldname_opt_records'>oldname_opt_records</span>
  <span class='kw'>return</span> <span class='ivar'>@oldname_opt_records</span> <span class='kw'>unless</span> <span class='ivar'>@oldname_opt_records</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='ivar'>@oldname_opt_records</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_opt_dir'>opt_dir</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>opt</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
    <span class='id identifier rubyid_opt_dir'>opt_dir</span><span class='period'>.</span><span class='id identifier rubyid_subdirs'>subdirs</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span>
      <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dir'>dir</span> <span class='op'>!=</span> <span class='id identifier rubyid_opt_record'>opt_record</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='op'>==</span> <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_resolved_path'>resolved_path</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="openjdk_dep_name_if_applicable-instance_method">
  
    #<strong>openjdk_dep_name_if_applicable</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 134</span>

<span class='kw'>def</span> <span class='id identifier rubyid_openjdk_dep_name_if_applicable'>openjdk_dep_name_if_applicable</span>
  <span class='id identifier rubyid_deps'>deps</span> <span class='op'>=</span> <span class='id identifier rubyid_runtime_dependencies'>runtime_dependencies</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_deps'>deps</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_dep_names'>dep_names</span> <span class='op'>=</span> <span class='id identifier rubyid_deps'>deps</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='id identifier rubyid_d'>d</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>full_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_dep_names'>dep_names</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span> <span class='const'><span class='object_link'><a href="Version.html" title="Version (class)">Version</a></span></span><span class='period'>.</span><span class='id identifier rubyid_formula_optionally_versioned_regex'><span class='object_link'><a href="Version.html#formula_optionally_versioned_regex-class_method" title="Version.formula_optionally_versioned_regex (method)">formula_optionally_versioned_regex</a></span></span><span class='lparen'>(</span><span class='symbol'>:openjdk</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="optlink-instance_method">
  
    #<strong>optlink</strong>(verbose: false, dry_run: false, overwrite: false)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


513
514
515
516
517
518
519
520
521
522
523
524
525
526</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 513</span>

<span class='kw'>def</span> <span class='id identifier rubyid_optlink'>optlink</span><span class='lparen'>(</span><span class='label'>verbose:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='kw'>if</span> <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>||</span> <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span>
  <span class='id identifier rubyid_make_relative_symlink'>make_relative_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_opt_record'>opt_record</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
    <span class='id identifier rubyid_alias_opt_record'>alias_opt_record</span> <span class='op'>=</span> <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='op'>/</span><span class='id identifier rubyid_a'>a</span>
    <span class='id identifier rubyid_alias_opt_record'>alias_opt_record</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='kw'>if</span> <span class='id identifier rubyid_alias_opt_record'>alias_opt_record</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>||</span> <span class='id identifier rubyid_alias_opt_record'>alias_opt_record</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span>
    <span class='id identifier rubyid_make_relative_symlink'>make_relative_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_alias_opt_record'>alias_opt_record</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_oldname_opt_records'>oldname_opt_records</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
    <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>
    <span class='id identifier rubyid_make_relative_symlink'>make_relative_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='id identifier rubyid_dry_run'>dry_run</span><span class='comma'>,</span> <span class='label'>overwrite:</span> <span class='id identifier rubyid_overwrite'>overwrite</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="optlinked?-instance_method">
  
    #<strong>optlinked?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_optlinked?'>optlinked?</span>
  <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_resolved_path'>resolved_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="plist_installed?-instance_method">
  
    #<strong>plist_installed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 360</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plist_installed?'>plist_installed?</span>
  <span class='op'>!</span><span class='const'>Dir</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/*.plist</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prepare_codesign_writable_files-instance_method">
  
    #<strong>prepare_codesign_writable_files</strong>(file)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prepare_codesign_writable_files'>prepare_codesign_writable_files</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_system_command'><span class='object_link'><a href="SystemCommand/Mixin.html#system_command-instance_method" title="SystemCommand::Mixin#system_command (method)">system_command</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>codesign</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>args:</span> <span class='lbracket'>[</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--display</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--file-list</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>
  <span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>print_stderr:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>

  <span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_stdout'>stdout</span><span class='period'>.</span><span class='id identifier rubyid_lines'>lines</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_saved_perms'>saved_perms</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_writable_real?'>writable_real?</span>
      <span class='id identifier rubyid_saved_perms'>saved_perms</span><span class='lbracket'>[</span><span class='id identifier rubyid_f'>f</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_mode'>mode</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_chmod'>chmod</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>u+rw</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_to_path'>to_path</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_saved_perms'>saved_perms</span><span class='op'>&amp;.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_chmod'>chmod</span> <span class='id identifier rubyid_p'>p</span> <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prepare_debug_symbols-instance_method">
  
    #<strong>prepare_debug_symbols</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97
98
99
100
101
102
103
104
105
106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prepare_debug_symbols'>prepare_debug_symbols</span>
  <span class='id identifier rubyid_binary_executable_or_library_files'>binary_executable_or_library_files</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_odebug'>odebug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Extracting symbols </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_system_command'><span class='object_link'><a href="SystemCommand/Mixin.html#system_command-instance_method" title="SystemCommand::Mixin#system_command (method)">system_command</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dsymutil</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>args:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_file'>file</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>print_stderr:</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>

    <span class='comment'># If it fails again, error out
</span>    <span class='id identifier rubyid_ofail'>ofail</span> <span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='tstring_content'>      Failed to extract symbols from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_content'>:
</span><span class='tstring_content'>      </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_stderr'>stderr</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>    EOS
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prepare_relocation_to_locations-instance_method">
  
    #<strong>prepare_relocation_to_locations</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='generic_prepare_relocation_to_locations-instance_method'>generic_prepare_relocation_to_locations</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prepare_relocation_to_locations'>prepare_relocation_to_locations</span>
  <span class='id identifier rubyid_relocation'>relocation</span> <span class='op'>=</span> <span class='id identifier rubyid_generic_prepare_relocation_to_locations'>generic_prepare_relocation_to_locations</span>

  <span class='id identifier rubyid_brewed_perl'>brewed_perl</span> <span class='op'>=</span> <span class='id identifier rubyid_runtime_dependencies'>runtime_dependencies</span><span class='op'>&amp;.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_dep'>dep</span><span class='op'>|</span> <span class='id identifier rubyid_dep'>dep</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>full_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>perl</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dep'>dep</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>declared_directly</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_perl_path'>perl_path</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_brewed_perl'>brewed_perl</span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>perl</span><span class='tstring_end'>&quot;</span></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/opt/perl/bin/perl</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tab'>tab</span><span class='period'>.</span><span class='id identifier rubyid_built_on'>built_on</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_perl_path'>perl_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/bin/perl</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tab'>tab</span><span class='period'>.</span><span class='id identifier rubyid_built_on'>built_on</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>preferred_perl</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='comment'># For `:all` bottles, we could have built this bottle with a Perl we don&#39;t have.
</span>    <span class='comment'># Such bottles typically don&#39;t have strict version requirements.
</span>    <span class='id identifier rubyid_perl_path'>perl_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/bin/perl</span><span class='embexpr_beg'>#{</span><span class='const'>MacOS</span><span class='period'>.</span><span class='id identifier rubyid_preferred_perl_version'>preferred_perl_version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_perl_path'>perl_path</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_perl_path'>perl_path</span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/bin/perl</span><span class='embexpr_beg'>#{</span><span class='const'>MacOS</span><span class='period'>.</span><span class='id identifier rubyid_preferred_perl_version'>preferred_perl_version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_add_replacement_pair'>add_replacement_pair</span><span class='lparen'>(</span><span class='symbol'>:perl</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#PERL_PLACEHOLDER-constant" title="Keg::PERL_PLACEHOLDER (constant)">PERL_PLACEHOLDER</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_perl_path'>perl_path</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_openjdk'>openjdk</span> <span class='op'>=</span> <span class='id identifier rubyid_openjdk_dep_name_if_applicable'>openjdk_dep_name_if_applicable</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_openjdk_path'>openjdk_path</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>opt</span><span class='tstring_end'>&quot;</span></span><span class='op'>/</span><span class='id identifier rubyid_openjdk'>openjdk</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>libexec/openjdk.jdk/Contents/Home</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_add_replacement_pair'>add_replacement_pair</span><span class='lparen'>(</span><span class='symbol'>:java</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#JAVA_PLACEHOLDER-constant" title="Keg::JAVA_PLACEHOLDER (constant)">JAVA_PLACEHOLDER</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_openjdk_path'>openjdk_path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_relocation'>relocation</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prepare_relocation_to_placeholders-instance_method">
  
    #<strong>prepare_relocation_to_placeholders</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='generic_prepare_relocation_to_placeholders-instance_method'>generic_prepare_relocation_to_placeholders</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prepare_relocation_to_placeholders'>prepare_relocation_to_placeholders</span>
  <span class='id identifier rubyid_relocation'>relocation</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Keg/Relocation.html" title="Keg::Relocation (class)">Relocation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Keg/Relocation.html#initialize-instance_method" title="Keg::Relocation#initialize (method)">new</a></span></span>
  <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_add_replacement_pair'>add_replacement_pair</span><span class='lparen'>(</span><span class='symbol'>:prefix</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#PREFIX_PLACEHOLDER-constant" title="Keg::PREFIX_PLACEHOLDER (constant)">PREFIX_PLACEHOLDER</a></span></span><span class='comma'>,</span> <span class='label'>path:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_add_replacement_pair'>add_replacement_pair</span><span class='lparen'>(</span><span class='symbol'>:cellar</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_CELLAR-constant" title="HOMEBREW_CELLAR (constant)">HOMEBREW_CELLAR</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#CELLAR_PLACEHOLDER-constant" title="Keg::CELLAR_PLACEHOLDER (constant)">CELLAR_PLACEHOLDER</a></span></span><span class='comma'>,</span> <span class='label'>path:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='comment'># when HOMEBREW_PREFIX == HOMEBREW_REPOSITORY we should use HOMEBREW_PREFIX for all relocations to avoid
</span>  <span class='comment'># being unable to differentiate between them.
</span>  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_REPOSITORY-constant" title="HOMEBREW_REPOSITORY (constant)">HOMEBREW_REPOSITORY</a></span></span>
    <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_add_replacement_pair'>add_replacement_pair</span><span class='lparen'>(</span><span class='symbol'>:repository</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_REPOSITORY-constant" title="HOMEBREW_REPOSITORY (constant)">HOMEBREW_REPOSITORY</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#REPOSITORY_PLACEHOLDER-constant" title="Keg::REPOSITORY_PLACEHOLDER (constant)">REPOSITORY_PLACEHOLDER</a></span></span><span class='comma'>,</span> <span class='label'>path:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_add_replacement_pair'>add_replacement_pair</span><span class='lparen'>(</span><span class='symbol'>:library</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_LIBRARY-constant" title="HOMEBREW_LIBRARY (constant)">HOMEBREW_LIBRARY</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#LIBRARY_PLACEHOLDER-constant" title="Keg::LIBRARY_PLACEHOLDER (constant)">LIBRARY_PLACEHOLDER</a></span></span><span class='comma'>,</span> <span class='label'>path:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_add_replacement_pair'>add_replacement_pair</span><span class='lparen'>(</span><span class='symbol'>:perl</span><span class='comma'>,</span>
                                  <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>\A#!(?:/usr/bin/perl\d\.\d+|</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/opt/perl/bin/perl)( |$)</span><span class='regexp_end'>}o</span></span><span class='comma'>,</span>
                                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#PERL_PLACEHOLDER-constant" title="Keg::PERL_PLACEHOLDER (constant)">PERL_PLACEHOLDER</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_add_replacement_pair'>add_replacement_pair</span><span class='lparen'>(</span><span class='symbol'>:java</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#JAVA_REGEX-constant" title="Keg::JAVA_REGEX (constant)">JAVA_REGEX</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#JAVA_PLACEHOLDER-constant" title="Keg::JAVA_PLACEHOLDER (constant)">JAVA_PLACEHOLDER</a></span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_relocation'>relocation</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="python_pth_files_installed?-instance_method">
  
    #<strong>python_pth_files_installed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


369
370
371</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 369</span>

<span class='kw'>def</span> <span class='id identifier rubyid_python_pth_files_installed?'>python_pth_files_installed?</span>
  <span class='op'>!</span><span class='const'>Dir</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/lib/python2.7/site-packages/*.pth</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="python_site_packages_installed?-instance_method">
  
    #<strong>python_site_packages_installed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_python_site_packages_installed?'>python_site_packages_installed?</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lib/python2.7/site-packages</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rack-instance_method">
  
    #<strong>rack</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 174</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rack'>rack</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="recursive_fgrep_args-instance_method">
  
    #<strong>recursive_fgrep_args</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='generic_recursive_fgrep_args-instance_method'>generic_recursive_fgrep_args</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224
225
226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 222</span>

<span class='kw'>def</span> <span class='id identifier rubyid_recursive_fgrep_args'>recursive_fgrep_args</span>
  <span class='comment'># Don&#39;t recurse into symlinks; the man page says this is the default, but
</span>  <span class='comment'># it&#39;s wrong. -O is a BSD-grep-only option.
</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-lrO</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relocate_build_prefix-instance_method">
  
    #<strong>relocate_build_prefix</strong>(keg, old_prefix, new_prefix)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relocate_build_prefix'>relocate_build_prefix</span><span class='lparen'>(</span><span class='id identifier rubyid_keg'>keg</span><span class='comma'>,</span> <span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_each_unique_file_matching'>each_unique_file_matching</span><span class='lparen'>(</span><span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='comment'># Skip files which are not binary, as they do not need null padding.
</span>    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_keg'>keg</span><span class='period'>.</span><span class='id identifier rubyid_binary_file?'>binary_file?</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>

    <span class='comment'># Skip sharballs, which appear to break if patched.
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_text_executable?'>text_executable?</span>

    <span class='comment'># Split binary by null characters into array and substitute new prefix for old prefix.
</span>    <span class='comment'># Null padding is added if the new string is too short.
</span>    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_ensure_writable'>ensure_writable</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_binary'>binary</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_binread'>binread</span> <span class='id identifier rubyid_file'>file</span>
      <span class='id identifier rubyid_odebug'>odebug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Replacing build prefix in: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_binary_strings'>binary_strings</span> <span class='op'>=</span> <span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#NULL_BYTE-constant" title="Keg::NULL_BYTE (constant)">NULL_BYTE</a></span></span><span class='embexpr_end'>}</span><span class='regexp_end'>/o</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_match_indices'>match_indices</span> <span class='op'>=</span> <span class='id identifier rubyid_binary_strings'>binary_strings</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_binary_strings'>binary_strings</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

      <span class='comment'># Only perform substitution on strings which match prefix regex.
</span>      <span class='id identifier rubyid_match_indices'>match_indices</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_binary_strings'>binary_strings</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_binary_strings'>binary_strings</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='rparen'>)</span>
                             <span class='period'>.</span><span class='id identifier rubyid_ljust'>ljust</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#NULL_BYTE-constant" title="Keg::NULL_BYTE (constant)">NULL_BYTE</a></span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='comment'># Rejoin strings by null bytes.
</span>      <span class='id identifier rubyid_patched_binary'>patched_binary</span> <span class='op'>=</span> <span class='id identifier rubyid_binary_strings'>binary_strings</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#NULL_BYTE-constant" title="Keg::NULL_BYTE (constant)">NULL_BYTE</a></span></span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_patched_binary'>patched_binary</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>!=</span> <span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='tstring_content'>          Patching failed!  Original and patched binary sizes do not match.
</span><span class='tstring_content'>          Original size: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='tstring_content'>          Patched size: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_patched_binary'>patched_binary</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>        EOS
</span>      <span class='kw'>end</span>

      <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_atomic_write'>atomic_write</span> <span class='id identifier rubyid_patched_binary'>patched_binary</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_codesign_patched_binary'>codesign_patched_binary</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relocate_dynamic_linkage-instance_method">
  
    #<strong>relocate_dynamic_linkage</strong>(_relocation)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relocate_dynamic_linkage'>relocate_dynamic_linkage</span><span class='lparen'>(</span><span class='id identifier rubyid_relocation'>relocation</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mach_o_files'>mach_o_files</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_ensure_writable'>ensure_writable</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='const'>T</span><span class='period'>.</span><span class='id identifier rubyid_let'>let</span><span class='lparen'>(</span><span class='kw'>false</span><span class='comma'>,</span> <span class='const'>T</span><span class='op'>::</span><span class='const'>Boolean</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>=</span> <span class='const'>T</span><span class='period'>.</span><span class='id identifier rubyid_let'>let</span><span class='lparen'>(</span><span class='kw'>false</span><span class='comma'>,</span> <span class='const'>T</span><span class='op'>::</span><span class='const'>Boolean</span><span class='rparen'>)</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib?'>dylib?</span>
        <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_relocated_name_for'>relocated_name_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_dylib_id'>dylib_id</span><span class='comma'>,</span> <span class='id identifier rubyid_relocation'>relocation</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='id identifier rubyid_change_dylib_id'>change_dylib_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>||=</span> <span class='id identifier rubyid_modified'>modified</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_each_linkage_for'>each_linkage_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='symbol'>:dynamically_linked_libraries</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_old_name'>old_name</span><span class='op'>|</span>
        <span class='id identifier rubyid_new_name'>new_name</span> <span class='op'>=</span> <span class='id identifier rubyid_relocated_name_for'>relocated_name_for</span><span class='lparen'>(</span><span class='id identifier rubyid_old_name'>old_name</span><span class='comma'>,</span> <span class='id identifier rubyid_relocation'>relocation</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='id identifier rubyid_change_install_name'>change_install_name</span><span class='lparen'>(</span><span class='id identifier rubyid_old_name'>old_name</span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_name'>new_name</span>
        <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>||=</span> <span class='id identifier rubyid_modified'>modified</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_each_linkage_for'>each_linkage_for</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='symbol'>:rpaths</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_old_name'>old_name</span><span class='op'>|</span>
        <span class='id identifier rubyid_new_name'>new_name</span> <span class='op'>=</span> <span class='id identifier rubyid_relocated_name_for'>relocated_name_for</span><span class='lparen'>(</span><span class='id identifier rubyid_old_name'>old_name</span><span class='comma'>,</span> <span class='id identifier rubyid_relocation'>relocation</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='id identifier rubyid_change_rpath'>change_rpath</span><span class='lparen'>(</span><span class='id identifier rubyid_old_name'>old_name</span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_name'>new_name</span>
        <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span> <span class='op'>||=</span> <span class='id identifier rubyid_modified'>modified</span>
      <span class='kw'>end</span>

      <span class='comment'># codesign the file if needed
</span>      <span class='id identifier rubyid_codesign_patched_binary'>codesign_patched_binary</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_needs_codesigning'>needs_codesigning</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relocated_name_for-instance_method">
  
    #<strong>relocated_name_for</strong>(old_name, relocation)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'extend/os/mac/keg_relocate.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relocated_name_for'>relocated_name_for</span><span class='lparen'>(</span><span class='id identifier rubyid_old_name'>old_name</span><span class='comma'>,</span> <span class='id identifier rubyid_relocation'>relocation</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_new_prefix'>new_prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_replacement_pair_for'>replacement_pair_for</span><span class='lparen'>(</span><span class='symbol'>:prefix</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_old_cellar'>old_cellar</span><span class='comma'>,</span> <span class='id identifier rubyid_new_cellar'>new_cellar</span> <span class='op'>=</span> <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_replacement_pair_for'>replacement_pair_for</span><span class='lparen'>(</span><span class='symbol'>:cellar</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_old_name'>old_name</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span> <span class='id identifier rubyid_old_cellar'>old_cellar</span>
    <span class='id identifier rubyid_old_name'>old_name</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='id identifier rubyid_old_cellar'>old_cellar</span><span class='comma'>,</span> <span class='id identifier rubyid_new_cellar'>new_cellar</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_old_name'>old_name</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span> <span class='id identifier rubyid_old_prefix'>old_prefix</span>
    <span class='id identifier rubyid_old_name'>old_name</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='id identifier rubyid_old_prefix'>old_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_new_prefix'>new_prefix</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_linked_keg_record-instance_method">
  
    #<strong>remove_linked_keg_record</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 215</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_linked_keg_record'>remove_linked_keg_record</span>
  <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='period'>.</span><span class='id identifier rubyid_unlink'>unlink</span>
  <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_rmdir_if_possible'>rmdir_if_possible</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_old_aliases-instance_method">
  
    #<strong>remove_old_aliases</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 224</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_old_aliases'>remove_old_aliases</span>
  <span class='id identifier rubyid_opt'>opt</span> <span class='op'>=</span> <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
  <span class='id identifier rubyid_linkedkegs'>linkedkegs</span> <span class='op'>=</span> <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>

  <span class='id identifier rubyid_tap'>tap</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_to_formula'>to_formula</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span>
  <span class='kw'>rescue</span>
    <span class='comment'># If the formula can&#39;t be found, just ignore aliases for now.
</span>    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_tap'>tap</span>
    <span class='id identifier rubyid_bad_tap_opt'>bad_tap_opt</span> <span class='op'>=</span> <span class='id identifier rubyid_opt'>opt</span><span class='op'>/</span><span class='id identifier rubyid_tap'>tap</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span>
    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_bad_tap_opt'>bad_tap_opt</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_bad_tap_opt'>bad_tap_opt</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_bad_tap_opt'>bad_tap_opt</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
    <span class='comment'># versioned aliases are handled below
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.+@.</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_remove_alias_symlink'>remove_alias_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_opt'>opt</span><span class='op'>/</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_opt_record'>opt_record</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_remove_alias_symlink'>remove_alias_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_linkedkegs'>linkedkegs</span><span class='op'>/</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_linked_keg_record'>linked_keg_record</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='const'><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opt_record'>opt_record</span><span class='embexpr_end'>}</span><span class='tstring_content'>@*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
    <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_remove_alias_symlink'>remove_alias_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_opt'>opt</span><span class='op'>/</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_rack'>rack</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_remove_alias_symlink'>remove_alias_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_linkedkegs'>linkedkegs</span><span class='op'>/</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_rack'>rack</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_oldname_opt_records-instance_method">
  
    #<strong>remove_oldname_opt_records</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


490
491
492
493
494
495
496
497
498</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 490</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_oldname_opt_records'>remove_oldname_opt_records</span>
  <span class='id identifier rubyid_oldname_opt_records'>oldname_opt_records</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_resolved_path'>resolved_path</span> <span class='op'>!=</span> <span class='id identifier rubyid_path'>path</span>

    <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_unlink'>unlink</span>
    <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_rmdir_if_possible'>rmdir_if_possible</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_opt_record-instance_method">
  
    #<strong>remove_opt_record</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 257</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_opt_record'>remove_opt_record</span>
  <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_unlink'>unlink</span>
  <span class='id identifier rubyid_opt_record'>opt_record</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_rmdir_if_possible'>rmdir_if_possible</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="replace_locations_with_placeholders-instance_method">
  
    #<strong>replace_locations_with_placeholders</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replace_locations_with_placeholders'>replace_locations_with_placeholders</span>
  <span class='id identifier rubyid_relocation'>relocation</span> <span class='op'>=</span> <span class='id identifier rubyid_prepare_relocation_to_placeholders'>prepare_relocation_to_placeholders</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='id identifier rubyid_relocate_dynamic_linkage'>relocate_dynamic_linkage</span><span class='lparen'>(</span><span class='id identifier rubyid_relocation'>relocation</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_replace_text_in_files'>replace_text_in_files</span><span class='lparen'>(</span><span class='id identifier rubyid_relocation'>relocation</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="replace_placeholders_with_locations-instance_method">
  
    #<strong>replace_placeholders_with_locations</strong>(files, skip_linkage: false)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replace_placeholders_with_locations'>replace_placeholders_with_locations</span><span class='lparen'>(</span><span class='id identifier rubyid_files'>files</span><span class='comma'>,</span> <span class='label'>skip_linkage:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_relocation'>relocation</span> <span class='op'>=</span> <span class='id identifier rubyid_prepare_relocation_to_locations'>prepare_relocation_to_locations</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='id identifier rubyid_relocate_dynamic_linkage'>relocate_dynamic_linkage</span><span class='lparen'>(</span><span class='id identifier rubyid_relocation'>relocation</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_skip_linkage'>skip_linkage</span>
  <span class='id identifier rubyid_replace_text_in_files'>replace_text_in_files</span><span class='lparen'>(</span><span class='id identifier rubyid_relocation'>relocation</span><span class='comma'>,</span> <span class='label'>files:</span> <span class='id identifier rubyid_files'>files</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="replace_text_in_files-instance_method">
  
    #<strong>replace_text_in_files</strong>(relocation, files: nil)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replace_text_in_files'>replace_text_in_files</span><span class='lparen'>(</span><span class='id identifier rubyid_relocation'>relocation</span><span class='comma'>,</span> <span class='label'>files:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_files'>files</span> <span class='op'>||=</span> <span class='id identifier rubyid_text_files'>text_files</span> <span class='op'>|</span> <span class='id identifier rubyid_libtool_files'>libtool_files</span>

  <span class='id identifier rubyid_changed_files'>changed_files</span> <span class='op'>=</span> <span class='const'>T</span><span class='period'>.</span><span class='id identifier rubyid_let'>let</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:join</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group_by'>group_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_ino'>ino</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_rest'>rest</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbol'>:read</span><span class='rparen'>)</span>

    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_relocation'>relocation</span><span class='period'>.</span><span class='id identifier rubyid_replace_text'>replace_text</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_changed_files'>changed_files</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_rest'>rest</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_relative_path_from'>relative_path_from</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

    <span class='kw'>begin</span>
      <span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_atomic_write'>atomic_write</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>SystemCallError</span>
      <span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_ensure_writable'>ensure_writable</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_rest'>rest</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_ln'>ln</span><span class='lparen'>(</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='label'>force:</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_changed_files'>changed_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_relocation?-instance_method">
  
    #<strong>require_relocation?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 205</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_relocation?'>require_relocation?</span>
  <span class='ivar'>@require_relocation</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="runtime_dependencies-instance_method">
  
    #<strong>runtime_dependencies</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


504
505
506
507</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 504</span>

<span class='kw'>def</span> <span class='id identifier rubyid_runtime_dependencies'>runtime_dependencies</span>
  <span class='const'><span class='object_link'><a href="" title="Keg (class)">Keg</a></span></span><span class='period'>.</span><span class='id identifier rubyid_cache'><span class='object_link'><a href="Cachable.html#cache-instance_method" title="Cachable#cache (method)">cache</a></span></span><span class='lbracket'>[</span><span class='symbol'>:runtime_dependencies</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="" title="Keg (class)">Keg</a></span></span><span class='period'>.</span><span class='id identifier rubyid_cache'><span class='object_link'><a href="Cachable.html#cache-instance_method" title="Cachable#cache (method)">cache</a></span></span><span class='lbracket'>[</span><span class='symbol'>:runtime_dependencies</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_tab'>tab</span><span class='period'>.</span><span class='id identifier rubyid_runtime_dependencies'>runtime_dependencies</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="symlink_files-instance_method">
  
    #<strong>symlink_files</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


316
317
318
319
320
321
322
323</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 316</span>

<span class='kw'>def</span> <span class='id identifier rubyid_symlink_files'>symlink_files</span>
  <span class='id identifier rubyid_symlink_files'>symlink_files</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pn'>pn</span><span class='op'>|</span>
    <span class='id identifier rubyid_symlink_files'>symlink_files</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pn'>pn</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_symlink_files'>symlink_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tab-instance_method">
  
    #<strong>tab</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


500
501
502</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 500</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tab'>tab</span>
  <span class='const'><span class='object_link'><a href="Tab.html" title="Tab (class)">Tab</a></span></span><span class='period'>.</span><span class='id identifier rubyid_for_keg'><span class='object_link'><a href="Tab.html#for_keg-class_method" title="Tab.for_keg (method)">for_keg</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="text_files-instance_method">
  
    #<strong>text_files</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg_relocate.rb', line 260</span>

<span class='kw'>def</span> <span class='id identifier rubyid_text_files'>text_files</span>
  <span class='id identifier rubyid_text_files'>text_files</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_text_files'>text_files</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_which'>which</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_which'>which</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xargs</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'># file has known issues with reading files on other locales. Has
</span>  <span class='comment'># been fixed upstream for some time, but a sufficiently new enough
</span>  <span class='comment'># file with that fix is only available in macOS Sierra.
</span>  <span class='comment'># https://bugs.gw.com/view.php?id=292
</span>  <span class='id identifier rubyid_with_custom_locale'>with_custom_locale</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pn'>pn</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span>
      <span class='kw'>next</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
      <span class='kw'>next</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>orig-prefix.txt</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># for python virtualenvs
</span>      <span class='kw'>next</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span> <span class='op'>==</span> <span class='kw'>self</span><span class='op'>/</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.brew/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.rb</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>next</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="Metafiles.html" title="Metafiles (module)">Metafiles</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Metafiles.html#EXTENSIONS-constant" title="Metafiles::EXTENSIONS (constant)">EXTENSIONS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_extname'>extname</span><span class='rparen'>)</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_pn'>pn</span><span class='period'>.</span><span class='id identifier rubyid_text_executable?'>text_executable?</span>
        <span class='id identifier rubyid_text_files'>text_files</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pn'>pn</span>
        <span class='kw'>next</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
      <span class='kw'>false</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid__status'>_status</span> <span class='op'>=</span> <span class='const'>Open3</span><span class='period'>.</span><span class='id identifier rubyid_capture2'>capture2</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xargs -0 file --no-dereference --print0</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                     <span class='label'>stdin_data:</span> <span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='comment'># `file` output sometimes contains data from the file, which may include
</span>    <span class='comment'># invalid UTF-8 entities, so tell Ruby this is just a bytestring
</span>    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ASCII_8BIT</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_each_line'>each_line</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
      <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span>
      <span class='comment'># `file` sometimes prints more than one line of output per file;
</span>      <span class='comment'># subsequent lines do not contain a null-byte separator, so `info`
</span>      <span class='comment'># will be `nil` for those lines
</span>      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_info'>info</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_text_files'>text_files</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_path'>path</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_text_files'>text_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_formula-instance_method">
  
    #<strong>to_formula</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


390
391
392</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 390</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_formula'>to_formula</span>
  <span class='const'><span class='object_link'><a href="Formulary.html" title="Formulary (module)">Formulary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_keg'><span class='object_link'><a href="Formulary.html#from_keg-class_method" title="Formulary.from_keg (method)">from_keg</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uninstall-instance_method">
  
    #<strong>uninstall</strong>(raise_failures: false)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uninstall'>uninstall</span><span class='lparen'>(</span><span class='label'>raise_failures:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="CacheStoreDatabase.html" title="CacheStoreDatabase (class)">CacheStoreDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_use'><span class='object_link'><a href="CacheStoreDatabase.html#use-class_method" title="CacheStoreDatabase.use (method)">use</a></span></span><span class='lparen'>(</span><span class='symbol'>:linkage</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
    <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_created?'>created?</span>

    <span class='const'><span class='object_link'><a href="LinkageCacheStore.html" title="LinkageCacheStore (class)">LinkageCacheStore</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="LinkageCacheStore.html#initialize-instance_method" title="LinkageCacheStore#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_db'>db</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_delete!'>delete!</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_rmtree'>rmtree</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_rmdir_if_possible'>rmdir_if_possible</span>
  <span class='id identifier rubyid_remove_opt_record'>remove_opt_record</span> <span class='kw'>if</span> <span class='id identifier rubyid_optlinked?'>optlinked?</span>
  <span class='id identifier rubyid_remove_linked_keg_record'>remove_linked_keg_record</span> <span class='kw'>if</span> <span class='id identifier rubyid_linked?'>linked?</span>
  <span class='id identifier rubyid_remove_old_aliases'>remove_old_aliases</span>
  <span class='id identifier rubyid_remove_oldname_opt_records'>remove_oldname_opt_records</span>
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EACCES</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTEMPTY</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>if</span> <span class='id identifier rubyid_raise_failures'>raise_failures</span>

  <span class='id identifier rubyid_odie'>odie</span> <span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='tstring_content'>    Could not remove </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> keg! Do so manually:
</span><span class='tstring_content'>      sudo rm -rf </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>  EOS
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unlink-instance_method">
  
    #<strong>unlink</strong>(verbose: false, dry_run: false)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unlink'>unlink</span><span class='lparen'>(</span><span class='label'>verbose:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>dry_run:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='const'>ObserverPathnameExtension</span><span class='period'>.</span><span class='id identifier rubyid_reset_counts!'>reset_counts!</span>

  <span class='id identifier rubyid_dirs'>dirs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_keg_directories'>keg_directories</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#KEG_LINK_DIRECTORIES-constant" title="Keg::KEG_LINK_DIRECTORIES (constant)">KEG_LINK_DIRECTORIES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='id identifier rubyid_path'>path</span><span class='op'>/</span><span class='id identifier rubyid_d'>d</span> <span class='rbrace'>}</span>
                                        <span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:exist?</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_keg_directories'>keg_directories</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span>
    <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_src'>src</span><span class='op'>|</span>
      <span class='id identifier rubyid_dst'>dst</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEBREW_PREFIX-constant" title="HOMEBREW_PREFIX (constant)">HOMEBREW_PREFIX</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_src'>src</span><span class='period'>.</span><span class='id identifier rubyid_relative_path_from'>relative_path_from</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_dst'>dst</span><span class='period'>.</span><span class='id identifier rubyid_extend'>extend</span><span class='lparen'>(</span><span class='const'>ObserverPathnameExtension</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_dirs'>dirs</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dst'>dst</span> <span class='kw'>if</span> <span class='id identifier rubyid_dst'>dst</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_dst'>dst</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span>

      <span class='comment'># check whether the file to be unlinked is from the current keg first
</span>      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_dst'>dst</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_src'>src</span> <span class='op'>!=</span> <span class='id identifier rubyid_dst'>dst</span><span class='period'>.</span><span class='id identifier rubyid_resolved_path'>resolved_path</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_dry_run'>dry_run</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_dst'>dst</span>
        <span class='const'>Find</span><span class='period'>.</span><span class='id identifier rubyid_prune'>prune</span> <span class='kw'>if</span> <span class='id identifier rubyid_src'>src</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_dst'>dst</span><span class='period'>.</span><span class='id identifier rubyid_uninstall_info'>uninstall_info</span> <span class='kw'>if</span> <span class='id identifier rubyid_dst'>dst</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#INFOFILE_RX-constant" title="Keg::INFOFILE_RX (constant)">INFOFILE_RX</a></span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_dst'>dst</span><span class='period'>.</span><span class='id identifier rubyid_unlink'>unlink</span>
      <span class='const'>Find</span><span class='period'>.</span><span class='id identifier rubyid_prune'>prune</span> <span class='kw'>if</span> <span class='id identifier rubyid_src'>src</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_dry_run'>dry_run</span>
    <span class='id identifier rubyid_remove_old_aliases'>remove_old_aliases</span>
    <span class='id identifier rubyid_remove_linked_keg_record'>remove_linked_keg_record</span> <span class='kw'>if</span> <span class='id identifier rubyid_linked?'>linked?</span>
    <span class='id identifier rubyid_dirs'>dirs</span><span class='period'>.</span><span class='id identifier rubyid_reverse_each'>reverse_each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:rmdir_if_possible</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='const'>ObserverPathnameExtension</span><span class='period'>.</span><span class='id identifier rubyid_n'>n</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="version-instance_method">
  
    #<strong>version</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


385
386
387
388</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'keg.rb', line 385</span>

<span class='kw'>def</span> <span class='id identifier rubyid_version'>version</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pkg_version</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'><span class='object_link'><a href="PkgVersion.html" title="PkgVersion (class)">PkgVersion</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="PkgVersion.html#parse-class_method" title="PkgVersion.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>