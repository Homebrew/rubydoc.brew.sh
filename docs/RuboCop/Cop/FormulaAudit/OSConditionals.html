<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: RuboCop::Cop::FormulaAudit::OSConditionals
  
    &mdash; Homebrew Ruby API
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "RuboCop::Cop::FormulaAudit::OSConditionals";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (O)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../RuboCop.html" title="RuboCop (module)">RuboCop</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Cop.html" title="RuboCop::Cop (module)">Cop</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../FormulaAudit.html" title="RuboCop::Cop::FormulaAudit (module)">FormulaAudit</a></span></span>
     &raquo; 
    <span class="title">OSConditionals</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: RuboCop::Cop::FormulaAudit::OSConditionals
  
  
  <span class="private note title">Private</span>
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../FormulaCop.html" title="RuboCop::Cop::FormulaCop (class)">RuboCop::Cop::FormulaCop</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Base</li>
          
            <li class="next"><span class='object_link'><a href="../FormulaCop.html" title="RuboCop::Cop::FormulaCop (class)">RuboCop::Cop::FormulaCop</a></span></li>
          
            <li class="next">RuboCop::Cop::FormulaAudit::OSConditionals</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>AutoCorrector</dd>
  </dl>
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>rubocops/lines.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  This class may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this class if possible, as it may be removed or changed without warning.
</p>
<p>This cop makes sure that OS conditionals are consistent.</p>


  </div>
</div>
<div class="tags">
  

</div>





  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../FormulaCop.html" title="RuboCop::Cop::FormulaCop (class)">RuboCop::Cop::FormulaCop</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../FormulaCop.html#file_path-instance_method" title="RuboCop::Cop::FormulaCop#file_path (method)">#file_path</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#audit_formula-instance_method" title="#audit_formula (instance method)">#<strong>audit_formula</strong>(_node, _class_node, _parent_class_node, body_node)  &#x21d2; Object </a>
    
    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>
  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../FormulaCop.html" title="RuboCop::Cop::FormulaCop (class)">RuboCop::Cop::FormulaCop</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../FormulaCop.html#audit_comments-instance_method" title="RuboCop::Cop::FormulaCop#audit_comments (method)">#audit_comments</a></span>, <span class='object_link'><a href="../FormulaCop.html#audit_urls-instance_method" title="RuboCop::Cop::FormulaCop#audit_urls (method)">#audit_urls</a></span>, <span class='object_link'><a href="../FormulaCop.html#caveats_strings-instance_method" title="RuboCop::Cop::FormulaCop#caveats_strings (method)">#caveats_strings</a></span>, <span class='object_link'><a href="../FormulaCop.html#depends_on%3F-instance_method" title="RuboCop::Cop::FormulaCop#depends_on? (method)">#depends_on?</a></span>, <span class='object_link'><a href="../FormulaCop.html#depends_on_name_type%3F-instance_method" title="RuboCop::Cop::FormulaCop#depends_on_name_type? (method)">#depends_on_name_type?</a></span>, <span class='object_link'><a href="../FormulaCop.html#formula_tap-instance_method" title="RuboCop::Cop::FormulaCop#formula_tap (method)">#formula_tap</a></span>, <span class='object_link'><a href="../FormulaCop.html#get_checksum_node-instance_method" title="RuboCop::Cop::FormulaCop#get_checksum_node (method)">#get_checksum_node</a></span>, <span class='object_link'><a href="../FormulaCop.html#on_class-instance_method" title="RuboCop::Cop::FormulaCop#on_class (method)">#on_class</a></span>, <span class='object_link'><a href="../FormulaCop.html#tap_style_exception%3F-instance_method" title="RuboCop::Cop::FormulaCop#tap_style_exception? (method)">#tap_style_exception?</a></span>, <span class='object_link'><a href="../FormulaCop.html#versioned_formula%3F-instance_method" title="RuboCop::Cop::FormulaCop#versioned_formula? (method)">#versioned_formula?</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../HelperFunctions.html" title="RuboCop::Cop::HelperFunctions (module)">HelperFunctions</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../HelperFunctions.html#block_size-instance_method" title="RuboCop::Cop::HelperFunctions#block_size (method)">#block_size</a></span>, <span class='object_link'><a href="../HelperFunctions.html#check_precedence-instance_method" title="RuboCop::Cop::HelperFunctions#check_precedence (method)">#check_precedence</a></span>, <span class='object_link'><a href="../HelperFunctions.html#class_name-instance_method" title="RuboCop::Cop::HelperFunctions#class_name (method)">#class_name</a></span>, <span class='object_link'><a href="../HelperFunctions.html#component_precedes%3F-instance_method" title="RuboCop::Cop::HelperFunctions#component_precedes? (method)">#component_precedes?</a></span>, <span class='object_link'><a href="../HelperFunctions.html#end_column-instance_method" title="RuboCop::Cop::HelperFunctions#end_column (method)">#end_column</a></span>, <span class='object_link'><a href="../HelperFunctions.html#expression_negated%3F-instance_method" title="RuboCop::Cop::HelperFunctions#expression_negated? (method)">#expression_negated?</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_all_blocks-instance_method" title="RuboCop::Cop::HelperFunctions#find_all_blocks (method)">#find_all_blocks</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_block-instance_method" title="RuboCop::Cop::HelperFunctions#find_block (method)">#find_block</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_blocks-instance_method" title="RuboCop::Cop::HelperFunctions#find_blocks (method)">#find_blocks</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_const-instance_method" title="RuboCop::Cop::HelperFunctions#find_const (method)">#find_const</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_every_func_call_by_name-instance_method" title="RuboCop::Cop::HelperFunctions#find_every_func_call_by_name (method)">#find_every_func_call_by_name</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_every_method_call_by_name-instance_method" title="RuboCop::Cop::HelperFunctions#find_every_method_call_by_name (method)">#find_every_method_call_by_name</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_instance_call-instance_method" title="RuboCop::Cop::HelperFunctions#find_instance_call (method)">#find_instance_call</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_instance_method_call-instance_method" title="RuboCop::Cop::HelperFunctions#find_instance_method_call (method)">#find_instance_method_call</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_method_calls_by_name-instance_method" title="RuboCop::Cop::HelperFunctions#find_method_calls_by_name (method)">#find_method_calls_by_name</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_method_def-instance_method" title="RuboCop::Cop::HelperFunctions#find_method_def (method)">#find_method_def</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_method_with_args-instance_method" title="RuboCop::Cop::HelperFunctions#find_method_with_args (method)">#find_method_with_args</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_node_method_by_name-instance_method" title="RuboCop::Cop::HelperFunctions#find_node_method_by_name (method)">#find_node_method_by_name</a></span>, <span class='object_link'><a href="../HelperFunctions.html#find_strings-instance_method" title="RuboCop::Cop::HelperFunctions#find_strings (method)">#find_strings</a></span>, <span class='object_link'><a href="../HelperFunctions.html#format_component-instance_method" title="RuboCop::Cop::HelperFunctions#format_component (method)">#format_component</a></span>, <span class='object_link'><a href="../HelperFunctions.html#line_number-instance_method" title="RuboCop::Cop::HelperFunctions#line_number (method)">#line_number</a></span>, <span class='object_link'><a href="../HelperFunctions.html#line_start_column-instance_method" title="RuboCop::Cop::HelperFunctions#line_start_column (method)">#line_start_column</a></span>, <span class='object_link'><a href="../HelperFunctions.html#method_called%3F-instance_method" title="RuboCop::Cop::HelperFunctions#method_called? (method)">#method_called?</a></span>, <span class='object_link'><a href="../HelperFunctions.html#method_called_ever%3F-instance_method" title="RuboCop::Cop::HelperFunctions#method_called_ever? (method)">#method_called_ever?</a></span>, <span class='object_link'><a href="../HelperFunctions.html#method_called_in_block%3F-instance_method" title="RuboCop::Cop::HelperFunctions#method_called_in_block? (method)">#method_called_in_block?</a></span>, <span class='object_link'><a href="../HelperFunctions.html#method_name-instance_method" title="RuboCop::Cop::HelperFunctions#method_name (method)">#method_name</a></span>, <span class='object_link'><a href="../HelperFunctions.html#node_equals%3F-instance_method" title="RuboCop::Cop::HelperFunctions#node_equals? (method)">#node_equals?</a></span>, <span class='object_link'><a href="../HelperFunctions.html#offending_node-instance_method" title="RuboCop::Cop::HelperFunctions#offending_node (method)">#offending_node</a></span>, <span class='object_link'><a href="../HelperFunctions.html#parameters-instance_method" title="RuboCop::Cop::HelperFunctions#parameters (method)">#parameters</a></span>, <span class='object_link'><a href="../HelperFunctions.html#parameters_passed%3F-instance_method" title="RuboCop::Cop::HelperFunctions#parameters_passed? (method)">#parameters_passed?</a></span>, <span class='object_link'><a href="../HelperFunctions.html#problem-instance_method" title="RuboCop::Cop::HelperFunctions#problem (method)">#problem</a></span>, <span class='object_link'><a href="../HelperFunctions.html#regex_match_group-instance_method" title="RuboCop::Cop::HelperFunctions#regex_match_group (method)">#regex_match_group</a></span>, <span class='object_link'><a href="../HelperFunctions.html#size-instance_method" title="RuboCop::Cop::HelperFunctions#size (method)">#size</a></span>, <span class='object_link'><a href="../HelperFunctions.html#source_buffer-instance_method" title="RuboCop::Cop::HelperFunctions#source_buffer (method)">#source_buffer</a></span>, <span class='object_link'><a href="../HelperFunctions.html#start_column-instance_method" title="RuboCop::Cop::HelperFunctions#start_column (method)">#start_column</a></span>, <span class='object_link'><a href="../HelperFunctions.html#string_content-instance_method" title="RuboCop::Cop::HelperFunctions#string_content (method)">#string_content</a></span></p>

  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="audit_formula-instance_method">
  
    #<strong>audit_formula</strong>(_node, _class_node, _parent_class_node, body_node)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  This method may only be used in the <a href="https://github.com/Homebrew/brew">Homebrew/brew</a> repository.
  Third parties should avoid using this method if possible, as it may be removed or changed without warning.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rubocops/lines.rb', line 355</span>

<span class='kw'>def</span> <span class='id identifier rubyid_audit_formula'>audit_formula</span><span class='lparen'>(</span><span class='id identifier rubyid__node'>_node</span><span class='comma'>,</span> <span class='id identifier rubyid__class_node'>_class_node</span><span class='comma'>,</span> <span class='id identifier rubyid__parent_class_node'>_parent_class_node</span><span class='comma'>,</span> <span class='id identifier rubyid_body_node'>body_node</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_no_on_os_method_names'>no_on_os_method_names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:install</span><span class='comma'>,</span> <span class='symbol'>:post_install</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='id identifier rubyid_no_on_os_block_names'>no_on_os_block_names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:test</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='symbol'>:on_macos</span><span class='comma'>,</span> <span class='symbol'>:mac?</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:on_linux</span><span class='comma'>,</span> <span class='symbol'>:linux?</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_on_method_name'>on_method_name</span><span class='comma'>,</span> <span class='id identifier rubyid_if_method_name'>if_method_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_if_method_and_class'>if_method_and_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>if OS.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_if_method_name'>if_method_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_no_on_os_method_names'>no_on_os_method_names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_formula_method_name'>formula_method_name</span><span class='op'>|</span>
      <span class='id identifier rubyid_method_node'>method_node</span> <span class='op'>=</span> <span class='id identifier rubyid_find_method_def'>find_method_def</span><span class='lparen'>(</span><span class='id identifier rubyid_body_node'>body_node</span><span class='comma'>,</span> <span class='id identifier rubyid_formula_method_name'>formula_method_name</span><span class='rparen'>)</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_method_node'>method_node</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_method_called_ever?'>method_called_ever?</span><span class='lparen'>(</span><span class='id identifier rubyid_method_node'>method_node</span><span class='comma'>,</span> <span class='id identifier rubyid_on_method_name'>on_method_name</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_problem'>problem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Don&#39;t use &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_on_method_name'>on_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; in &#39;def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_formula_method_name'>formula_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;, </span><span class='tstring_end'>&quot;</span></span> \
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>use &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_if_method_and_class'>if_method_and_class</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; instead.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_corrector'>corrector</span><span class='op'>|</span>
        <span class='id identifier rubyid_block_node'>block_node</span> <span class='op'>=</span> <span class='id identifier rubyid_offending_node'>offending_node</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_node'>block_node</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>!=</span> <span class='symbol'>:block</span>

        <span class='comment'># TODO: could fix corrector to handle this but punting for now.
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_node'>block_node</span><span class='period'>.</span><span class='id identifier rubyid_single_line?'>single_line?</span>

        <span class='id identifier rubyid_source_range'>source_range</span> <span class='op'>=</span> <span class='id identifier rubyid_offending_node'>offending_node</span><span class='period'>.</span><span class='id identifier rubyid_source_range'>source_range</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_offending_node'>offending_node</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_begin'>begin</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_corrector'>corrector</span><span class='period'>.</span><span class='id identifier rubyid_replace'>replace</span><span class='lparen'>(</span><span class='id identifier rubyid_source_range'>source_range</span><span class='comma'>,</span> <span class='id identifier rubyid_if_method_and_class'>if_method_and_class</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_no_on_os_block_names'>no_on_os_block_names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_formula_block_name'>formula_block_name</span><span class='op'>|</span>
      <span class='id identifier rubyid_block_node'>block_node</span> <span class='op'>=</span> <span class='id identifier rubyid_find_block'>find_block</span><span class='lparen'>(</span><span class='id identifier rubyid_body_node'>body_node</span><span class='comma'>,</span> <span class='id identifier rubyid_formula_block_name'>formula_block_name</span><span class='rparen'>)</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_node'>block_node</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_method_called_in_block?'>method_called_in_block?</span><span class='lparen'>(</span><span class='id identifier rubyid_block_node'>block_node</span><span class='comma'>,</span> <span class='id identifier rubyid_on_method_name'>on_method_name</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_problem'>problem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Don&#39;t use &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_on_method_name'>on_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; in &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_formula_block_name'>formula_block_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> do&#39;, </span><span class='tstring_end'>&quot;</span></span> \
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>use &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_if_method_and_class'>if_method_and_class</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; instead.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_corrector'>corrector</span><span class='op'>|</span>
        <span class='id identifier rubyid_block_node'>block_node</span> <span class='op'>=</span> <span class='id identifier rubyid_offending_node'>offending_node</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_node'>block_node</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>!=</span> <span class='symbol'>:block</span>

        <span class='comment'># TODO: could fix corrector to handle this but punting for now.
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_node'>block_node</span><span class='period'>.</span><span class='id identifier rubyid_single_line?'>single_line?</span>

        <span class='id identifier rubyid_source_range'>source_range</span> <span class='op'>=</span> <span class='id identifier rubyid_offending_node'>offending_node</span><span class='period'>.</span><span class='id identifier rubyid_source_range'>source_range</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_offending_node'>offending_node</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_begin'>begin</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_corrector'>corrector</span><span class='period'>.</span><span class='id identifier rubyid_replace'>replace</span><span class='lparen'>(</span><span class='id identifier rubyid_source_range'>source_range</span><span class='comma'>,</span> <span class='id identifier rubyid_if_method_and_class'>if_method_and_class</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># Don&#39;t restrict OS.mac? or OS.linux? usage in taps; they don&#39;t care
</span>    <span class='comment'># as much as we do about e.g. formulae.brew.sh generation, often use
</span>    <span class='comment'># platform-specific URLs and we don&#39;t want to add DSLs to support
</span>    <span class='comment'># that case.
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_formula_tap'>formula_tap</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>homebrew-core</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_find_instance_method_call'>find_instance_method_call</span><span class='lparen'>(</span><span class='id identifier rubyid_body_node'>body_node</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OS</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_if_method_name'>if_method_name</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
      <span class='id identifier rubyid_valid'>valid</span> <span class='op'>=</span> <span class='const'>T</span><span class='period'>.</span><span class='id identifier rubyid_let'>let</span><span class='lparen'>(</span><span class='kw'>false</span><span class='comma'>,</span> <span class='const'>T</span><span class='op'>::</span><span class='const'>Boolean</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_method'>method</span><span class='period'>.</span><span class='id identifier rubyid_each_ancestor'>each_ancestor</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ancestor'>ancestor</span><span class='op'>|</span>
        <span class='id identifier rubyid_valid_method_names'>valid_method_names</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_ancestor'>ancestor</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span>
        <span class='kw'>when</span> <span class='symbol'>:def</span>
          <span class='id identifier rubyid_no_on_os_method_names'>no_on_os_method_names</span>
        <span class='kw'>when</span> <span class='symbol'>:block</span>
          <span class='id identifier rubyid_no_on_os_block_names'>no_on_os_block_names</span>
        <span class='kw'>else</span>
          <span class='kw'>next</span>
        <span class='kw'>end</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_method_names'>valid_method_names</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_ancestor'>ancestor</span><span class='period'>.</span><span class='id identifier rubyid_method_name'>method_name</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_valid'>valid</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='kw'>break</span>
      <span class='kw'>end</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_valid'>valid</span>

      <span class='id identifier rubyid_offending_node'>offending_node</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_problem'>problem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Don&#39;t use &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_if_method_and_class'>if_method_and_class</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;, use &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_on_method_name'>on_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> do&#39; instead.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_corrector'>corrector</span><span class='op'>|</span>
        <span class='id identifier rubyid_if_node'>if_node</span> <span class='op'>=</span> <span class='id identifier rubyid_method'>method</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_if_node'>if_node</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>!=</span> <span class='symbol'>:if</span>

        <span class='comment'># TODO: could fix corrector to handle this but punting for now.
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_if_node'>if_node</span><span class='period'>.</span><span class='id identifier rubyid_unless?'>unless?</span>

        <span class='id identifier rubyid_corrector'>corrector</span><span class='period'>.</span><span class='id identifier rubyid_replace'>replace</span><span class='lparen'>(</span><span class='id identifier rubyid_if_node'>if_node</span><span class='period'>.</span><span class='id identifier rubyid_source_range'>source_range</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_on_method_name'>on_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> do\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_if_node'>if_node</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_source'>source</span><span class='embexpr_end'>}</span><span class='tstring_content'>\nend</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>