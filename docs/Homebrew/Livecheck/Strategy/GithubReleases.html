<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Homebrew::Livecheck::Strategy::GithubReleases
  
    &mdash; Homebrew Ruby API
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Homebrew::Livecheck::Strategy::GithubReleases";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Homebrew.html" title="Homebrew (module)">Homebrew</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Livecheck.html" title="Homebrew::Livecheck (module)">Livecheck</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Strategy.html" title="Homebrew::Livecheck::Strategy (module)">Strategy</a></span></span>
     &raquo; 
    <span class="title">GithubReleases</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Homebrew::Livecheck::Strategy::GithubReleases
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Homebrew::Livecheck::Strategy::GithubReleases</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>livecheck/strategy/github_releases.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>The <span class='object_link'><a href="" title="Homebrew::Livecheck::Strategy::GithubReleases (class)">GithubReleases</a></span> strategy identifies versions of software at
github.com by checking a repository’s recent releases using the
GitHub API.</p>

<p>GitHub URLs take a few different formats:</p>

<ul>
  <li><code>https://github.com/example/example/releases/download/1.2.3/example-1.2.3.tar.gz</code></li>
  <li><code>https://github.com/example/example/archive/v1.2.3.tar.gz</code></li>
  <li><code>https://github.com/downloads/example/example/example-1.2.3.tar.gz</code></li>
</ul>

<p><span class='object_link'><a href="" title="Homebrew::Livecheck::Strategy::GithubReleases (class)">GithubReleases</a></span> should only be used when the upstream repository has
releases for suitable versions and the strategy is necessary or
appropriate (e.g. the formula/cask uses a release asset and the
<span class='object_link'><a href="GithubLatest.html" title="Homebrew::Livecheck::Strategy::GithubLatest (class)">GithubLatest</a></span> strategy isn’t sufficient to identify the newest version.
The strategy can only be applied by using <code>strategy :github_releases</code>
in a <code>livecheck</code> block.</p>

<p>The default regex identifies versions like <code>1.2.3</code>/<code>v1.2.3</code> in each
release’s tag or title. This is a common tag format but a modified
regex can be provided in a <code>livecheck</code> block to override the default
if a repository uses a different format (e.g. <code>1.2.3d</code>, <code>1.2.3-4</code>,
etc.).</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="NICE_NAME-constant" class="">NICE_NAME =
          <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GitHub - Releases</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="PRIORITY-constant" class="">PRIORITY =
          <div class="docstring">
  <div class="discussion">
    <p>A priority of zero causes livecheck to skip the strategy. We do this
for <span class='object_link'><a href="" title="Homebrew::Livecheck::Strategy::GithubReleases (class)">Homebrew::Livecheck::Strategy::GithubReleases</a></span> so we can selectively apply the strategy using
<code>strategy :github_releases</code> in a <code>livecheck</code> block.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
        <dt id="URL_MATCH_REGEX-constant" class="">URL_MATCH_REGEX =
          <div class="docstring">
  <div class="discussion">
    <p>The <code>Regexp</code> used to determine if the strategy applies to the URL.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>
  ^https?://github\.com
  /(?:downloads/)?(?&lt;username&gt;[^/]+) # The GitHub username
  /(?&lt;repository&gt;[^/]+)              # The GitHub repository name
</span><span class='regexp_end'>}ix</span></span></pre></dd>
      
        <dt id="DEFAULT_REGEX-constant" class="">DEFAULT_REGEX =
          <div class="docstring">
  <div class="discussion">
    <p>The default regex used to identify a version from a tag when a regex
isn’t provided.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>v?(\d+(?:\.\d+)+)</span><span class='regexp_end'>/i</span></span></pre></dd>
      
        <dt id="VERSION_KEYS-constant" class="">VERSION_KEYS =
          <div class="docstring">
  <div class="discussion">
    <p>Keys in the release JSON that could contain the version.
The tag name is checked first, to better align with the <span class='object_link'><a href="Git.html" title="Homebrew::Livecheck::Strategy::Git (class)">Homebrew::Livecheck::Strategy::Git</a></span>
strategy.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tag_name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#find_versions-class_method" title="find_versions (class method)">.<strong>find_versions</strong>(url:, regex: DEFAULT_REGEX, **_unused, &amp;block)  &#x21d2; Hash{Symbol =&gt; T.untyped} </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'><p>Generates the GitHub API URL for the repository’s recent releases and identifies versions from the JSON response.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_input_values-class_method" title="generate_input_values (class method)">.<strong>generate_input_values</strong>(url)  &#x21d2; Hash{Symbol =&gt; T.untyped} </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'><p>Extracts information from a provided URL and uses it to generate various input values used by the strategy to check for new versions.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#match%3F-class_method" title="match? (class method)">.<strong>match?</strong>(url)  &#x21d2; Boolean </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'><p>Whether the strategy can be applied to the provided URL.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#versions_from_content-class_method" title="versions_from_content (class method)">.<strong>versions_from_content</strong>(content, regex, &amp;block)  &#x21d2; Array&lt;String&gt; </a>
    
    
  </span>
  
  
  
  
  
  
  
  
    <span class="summary_desc"><div class='inline'><p>Uses a regex to match versions from release JSON or, if a block is provided, passes the JSON to the block to handle matching.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="find_versions-class_method">
  
    .<strong>find_versions</strong>(url:, regex: DEFAULT_REGEX, **_unused, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="../../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'>T</span>.untyped}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Generates the GitHub API URL for the repository’s recent releases
and identifies versions from the JSON response.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>url</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the URL of the content to check</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>regex</span>
      
      
        <span class='type'>(<tt>Regexp</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>DEFAULT_REGEX</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a regex used for matching versions in content</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>_unused</span>
      
      
        <span class='type'>(<tt><span class='object_link'>T</span>.untyped</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="../../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'>T</span>.untyped}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'livecheck/strategy/github_releases.rb', line 136</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_versions'>find_versions</span><span class='lparen'>(</span><span class='label'>url:</span><span class='comma'>,</span> <span class='label'>regex:</span> <span class='const'><span class='object_link'><a href="#DEFAULT_REGEX-constant" title="Homebrew::Livecheck::Strategy::GithubReleases::DEFAULT_REGEX (constant)">DEFAULT_REGEX</a></span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid__unused'>_unused</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_match_data'>match_data</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>matches:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='label'>regex:</span> <span class='id identifier rubyid_regex'>regex</span><span class='comma'>,</span> <span class='label'>url:</span> <span class='id identifier rubyid_url'>url</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_generated'>generated</span> <span class='op'>=</span> <span class='id identifier rubyid_generate_input_values'>generate_input_values</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_match_data'>match_data</span> <span class='kw'>if</span> <span class='id identifier rubyid_generated'>generated</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_match_data'>match_data</span><span class='lbracket'>[</span><span class='symbol'>:url</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_generated'>generated</span><span class='lbracket'>[</span><span class='symbol'>:url</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_releases'>releases</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../GitHub.html" title="GitHub (module)">GitHub</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../GitHub/API.html" title="GitHub::API (module)">API</a></span></span><span class='period'>.</span><span class='id identifier rubyid_open_rest'><span class='object_link'><a href="../../../GitHub/API.html#open_rest-class_method" title="GitHub::API.open_rest (method)">open_rest</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_generated'>generated</span><span class='lbracket'>[</span><span class='symbol'>:url</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_versions_from_content'>versions_from_content</span><span class='lparen'>(</span><span class='id identifier rubyid_releases'>releases</span><span class='comma'>,</span> <span class='id identifier rubyid_regex'>regex</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_match_text'>match_text</span><span class='op'>|</span>
    <span class='id identifier rubyid_match_data'>match_data</span><span class='lbracket'>[</span><span class='symbol'>:matches</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_match_text'>match_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Version.html" title="Version (class)">Version</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../../Version.html#initialize-instance_method" title="Version#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_match_text'>match_text</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_match_data'>match_data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_input_values-class_method">
  
    .<strong>generate_input_values</strong>(url)  &#x21d2; <tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="../../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'>T</span>.untyped}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Extracts information from a provided URL and uses it to generate
various input values used by the strategy to check for new versions.
Some of these values act as defaults and can be overridden in a
<code>livecheck</code> block.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>url</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the URL used to generate values</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="../../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'>T</span>.untyped}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77
78
79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'livecheck/strategy/github_releases.rb', line 72</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generate_input_values'>generate_input_values</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_delete_suffix'>delete_suffix</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.git</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#URL_MATCH_REGEX-constant" title="Homebrew::Livecheck::Strategy::GithubReleases::URL_MATCH_REGEX (constant)">URL_MATCH_REGEX</a></span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_values'>values</span> <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:url</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../../../GitHub.html" title="GitHub (module)">GitHub</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../GitHub.html#API_URL-constant" title="GitHub::API_URL (constant)">API_URL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/repos/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='symbol'>:repository</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/releases</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:repository</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='symbol'>:repository</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_values'>values</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="match?-class_method">
  
    .<strong>match?</strong>(url)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Whether the strategy can be applied to the provided URL.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>url</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the URL to match against</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'livecheck/strategy/github_releases.rb', line 60</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="#URL_MATCH_REGEX-constant" title="Homebrew::Livecheck::Strategy::GithubReleases::URL_MATCH_REGEX (constant)">URL_MATCH_REGEX</a></span></span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="versions_from_content-class_method">
  
    .<strong>versions_from_content</strong>(content, regex, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../../String.html" title="String (class)">String</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Uses a regex to match versions from release JSON or, if a block is
provided, passes the JSON to the block to handle matching. With
either approach, an array of unique matches is returned.</p>

<p>content</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="../../../String.html" title="String (class)">String</a></span> =&gt; <span class='object_link'>T</span>.untyped}&gt;</tt>, <tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="../../../String.html" title="String (class)">String</a></span> =&gt; <span class='object_link'>T</span>.untyped}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>array of releases or a single release</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>regex</span>
      
      
        <span class='type'>(<tt>Regexp</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a regex used for matching versions in the</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a block to match the content</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'livecheck/strategy/github_releases.rb', line 101</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_versions_from_content'>versions_from_content</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_regex'>regex</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_block_return_value'>block_return_value</span> <span class='op'>=</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_regex'>regex</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'><span class='object_link'><a href="../Strategy.html" title="Homebrew::Livecheck::Strategy (module)">Strategy</a></span></span><span class='period'>.</span><span class='id identifier rubyid_handle_block_return'><span class='object_link'><a href="../Strategy.html#handle_block_return-class_method" title="Homebrew::Livecheck::Strategy.handle_block_return (method)">handle_block_return</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_block_return_value'>block_return_value</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_content'>content</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../../Array.html" title="Array (class)">Array</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_compact_blank'>compact_blank</span><span class='period'>.</span><span class='id identifier rubyid_filter_map'>filter_map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_release'>release</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_release'>release</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>draft</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_release'>release</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>prerelease</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>T</span><span class='period'>.</span><span class='id identifier rubyid_let'>let</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='const'>T</span><span class='period'>.</span><span class='id identifier rubyid_untyped'>untyped</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="#VERSION_KEYS-constant" title="Homebrew::Livecheck::Strategy::GithubReleases::VERSION_KEYS (constant)">VERSION_KEYS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
      <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_release'>release</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_regex'>regex</span><span class='rparen'>)</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>